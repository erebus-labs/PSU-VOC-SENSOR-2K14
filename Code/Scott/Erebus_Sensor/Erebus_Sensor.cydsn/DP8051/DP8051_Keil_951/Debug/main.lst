C51 COMPILER V9.51   MAIN                                                                  05/07/2014 01:31:32 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\main.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\main.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\main.lst) CD DB NOIP OT(0,SIZE) DF(DEBUG) INCDIR
                    -(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\main.obj)

line level    source

   1          /* ========================================
   2           *
   3           * Copyright YOUR COMPANY, THE YEAR
   4           * All Rights Reserved
   5           * UNPUBLISHED, LICENSED SOFTWARE.
   6           *
   7           * CONFIDENTIAL AND PROPRIETARY INFORMATION
   8           * WHICH IS THE PROPERTY OF your company.
   9           *
  10           * ========================================
  11          */
  12          
  13          #include "main.h"
  14          
  15          /* Globals */
  16          
  17          // Flash
  18          const uint8 CYCODE MemoryLocation[EmEEPROMSize]; 
  19          const volatile uint8* TailPtr = (uint8*) MemoryLocation;
  20          const uint8 CYCODE hard_reset_flag;
  21          
  22          // Flags
  23          uint8 low_power_flag = 0;
  24          
  25          int main()
  26          {
  27   1          // Check for hard reset flag
  28   1          if (hard_reset_flag){
  29   2              hard_reset();   
  30   2          }
  31   1          /* Initialization*/
  32   1      
  33   1          // Start Components
  34   1          EEPROM_R_Start();
  35   1          LED_PWM_Start();
  36   1          ADC_Start();
  37   1          ADC_Sleep();
  38   1          
  39   1          // RTC
  40   1          RTC_Start();
  41   1          rtc_setup();
  42   1          
  43   1          // Enable global interrupts
  44   1          CyGlobalIntEnable;
  45   1          
  46   1          // Enable individual interrupts as necessary   
  47   1          Vbus_IRQ_Start();
  48   1          StartCollection_IRQ_Start();
  49   1          
  50   1          for(;;){
  51   2              
  52   2              CyDelay(100);
  53   2              
C51 COMPILER V9.51   MAIN                                                                  05/07/2014 01:31:32 PAGE 2   

  54   2              #ifdef SLEEP_EN            
                      CyPmSaveClocks();        
                      
                      RTC_DisableInt();
                      
                      CyPmSleep(PM_SLEEP_TIME_NONE,PM_SLEEP_SRC_ONE_PPS);     
                      CyPmRestoreClocks(); 
              
                      
                      RTC_EnableInt();
                      #endif
  65   2          }
  66   1          
  67   1          return (0);
  68   1      }
  69          
  70          /* [] END OF FILE */
C51 COMPILER V9.51   MAIN                                                                  05/07/2014 01:31:32 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 25
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 28
0000 900000      R     MOV     DPTR,#hard_reset_flag
0003 E4                CLR     A
0004 93                MOVC    A,@A+DPTR
0005 FF                MOV     R7,A
0006 EF                MOV     A,R7
0007 6003              JZ      ?C0001
                                           ; SOURCE LINE # 29
0009 120000      E     LCALL   hard_reset
                                           ; SOURCE LINE # 30
000C         ?C0001:
                                           ; SOURCE LINE # 34
000C 120000      E     LCALL   EEPROM_R_Start
                                           ; SOURCE LINE # 35
000F 120000      E     LCALL   LED_PWM_Start
                                           ; SOURCE LINE # 36
0012 120000      E     LCALL   ADC_Start
                                           ; SOURCE LINE # 37
0015 120000      E     LCALL   ADC_Sleep
                                           ; SOURCE LINE # 40
0018 120000      E     LCALL   RTC_Start
                                           ; SOURCE LINE # 41
001B 120000      E     LCALL   rtc_setup
                                           ; SOURCE LINE # 44
001E D2AF              SETB    EA
0020 9044F4            MOV     DPTR,#044F4H
0023 74FD              MOV     A,#0FDH
0025 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 47
0026 120000      E     LCALL   Vbus_IRQ_Start
                                           ; SOURCE LINE # 48
0029 120000      E     LCALL   StartCollection_IRQ_Start
                                           ; SOURCE LINE # 50
002C         ?C0002:
                                           ; SOURCE LINE # 52
002C 7F64              MOV     R7,#064H
002E 7E00              MOV     R6,#00H
0030 7D00              MOV     R5,#00H
0032 7C00              MOV     R4,#00H
0034 120000      E     LCALL   _?CyDelay
                                           ; SOURCE LINE # 65
0037 80F3              SJMP    ?C0002
0039         ?C0003:
                                           ; SOURCE LINE # 67
0039 E4                CLR     A
003A 7E00              MOV     R6,#00H
003C 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 68
003E         ?C0004:
003E 22                RET     
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     63    ----
C51 COMPILER V9.51   MAIN                                                                  05/07/2014 01:31:32 PAGE 4   

   CONSTANT SIZE    =   1025    ----
   XDATA SIZE       =      4    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
