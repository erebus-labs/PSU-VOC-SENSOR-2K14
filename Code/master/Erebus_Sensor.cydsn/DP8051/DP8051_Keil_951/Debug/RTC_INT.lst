C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE RTC_INT
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\RTC_INT.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\Generated_Source\PSoC3\RTC_INT.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\RTC_INT.lst) CD DB NOI
                    -P OT(0,SIZE) DF(DEBUG) INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\RTC_INT.obj)

line level    source

   1          /*******************************************************************************
   2          * File Name: RTC_INT.c
   3          * Version 2.0
   4          *
   5          * Description:
   6          *  This file contains the Interrupt Service Routine (ISR) for the RTC component.
   7          *  This interrupt routine has entry pointes to overflow on time or date.
   8          *
   9          ********************************************************************************
  10          * Copyright 2008-2013, Cypress Semiconductor Corporation.  All rights reserved.
  11          * You may use this file only in accordance with the license, terms, conditions,
  12          * disclaimers, and limitations in the end user license agreement accompanying
  13          * the software package with which this file was provided.
  14          *******************************************************************************/
  15          
  16          #include "RTC.h"
  17          #include "CyLib.h"
  18          
  19          /* Function Prototypes */
  20          static void RTC_EverySecondHandler(void);
  21          static void RTC_EveryMinuteHandler(void);
  22          static void RTC_EveryHourHandler(void);
  23          static void RTC_EveryDayHandler(void);
  24          static void RTC_EveryWeekHandler(void);
  25          static void RTC_EveryMonthHandler(void);
  26          static void RTC_EveryYearHandler(void);
  27          
  28          
  29          /*******************************************************************************
  30          *  Place your includes, defines and code here
  31          *******************************************************************************/
  32          /* `#START RTC_ISR_DEFINITION` */
  33          
  34          /* `#END` */
  35          
  36          
  37          /*******************************************************************************
  38          * Function Name:   RTC_EverySecondHandler
  39          ********************************************************************************
  40          *
  41          * Summary:
  42          *  This function is called every second.
  43          *
  44          * Parameters:
  45          *  None.
  46          *
  47          * Return:
  48          *  None.
  49          *
  50          *******************************************************************************/
  51          static void RTC_EverySecondHandler(void)
  52          {
  53   1          /*  Place your every second handler code here. */
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 2   

  54   1          /* `#START EVERY_SECOND_HANDLER_CODE` */
  55   1      
  56   1          /* `#END` */
  57   1      }
  58          
  59          
  60          /*******************************************************************************
  61          * Function Name:   RTC_EveryMinuteHandler
  62          ********************************************************************************
  63          *
  64          * Summary:
  65          *  This function is called every minute.
  66          *
  67          * Parameters:
  68          *  None.
  69          *
  70          * Return:
  71          *  None.
  72          *
  73          *******************************************************************************/
  74          static void RTC_EveryMinuteHandler(void)
  75          {
  76   1          /*  Place your every minute handler code here. */
  77   1          /* `#START EVERY_MINUTE_HANDLER_CODE` */
  78   1      
  79   1          /* `#END` */
  80   1      }
  81          
  82          
  83          /*******************************************************************************
  84          * Function Name:   RTC_EveryHourHandler
  85          ********************************************************************************
  86          *
  87          * Summary:
  88          *  This function is called every hour.
  89          *
  90          * Parameters:
  91          *  None.
  92          *
  93          * Return:
  94          *  None.
  95          *
  96          *******************************************************************************/
  97          static void RTC_EveryHourHandler(void)
  98          {
  99   1          /*  Place your every hour handler code here. */
 100   1          /* `#START EVERY_HOUR_HANDLER_CODE` */
 101   1      
 102   1          /* `#END` */
 103   1      }
 104          
 105          
 106          /*******************************************************************************
 107          * Function Name:   RTC_EveryDayHandler
 108          ********************************************************************************
 109          *
 110          * Summary:
 111          *  This function is called every day.
 112          *
 113          * Parameters:
 114          *  None.
 115          *
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 3   

 116          * Return:
 117          *  None.
 118          *
 119          *******************************************************************************/
 120          static void RTC_EveryDayHandler(void)
 121          {
 122   1          /*  Place your everyday handler code here. */
 123   1          /* `#START EVERY_DAY_HANDLER_CODE` */
 124   1      
 125   1          /* `#END` */
 126   1      }
 127          
 128          
 129          /*******************************************************************************
 130          * Function Name:   RTC_EveryWeekHandler
 131          ********************************************************************************
 132          *
 133          * Summary:
 134          *  This function is called every week.
 135          *
 136          * Parameters:
 137          *  None.
 138          *
 139          * Return:
 140          *  None.
 141          *
 142          *******************************************************************************/
 143          static void RTC_EveryWeekHandler(void)
 144          {
 145   1          /*  Place your every week handler code here. */
 146   1          /* `#START EVERY_WEEK_HANDLER_CODE` */
 147   1      
 148   1          /* `#END` */
 149   1      }
 150          
 151          
 152          /*******************************************************************************
 153          * Function Name:   RTC_EveryMonthHandler
 154          ********************************************************************************
 155          *
 156          * Summary:
 157          *  This function is called every month.
 158          *
 159          * Parameters:
 160          *  None.
 161          *
 162          * Return:
 163          *  None.
 164          *
 165          *******************************************************************************/
 166          static void RTC_EveryMonthHandler(void)
 167          {
 168   1          /*  Place your every month handler code here. */
 169   1          /* `#START EVERY_MONTH_HANDLER_CODE` */
 170   1      
 171   1          /* `#END` */
 172   1      }
 173          
 174          
 175          /*******************************************************************************
 176          * Function Name:   RTC_EveryYearHandler
 177          ********************************************************************************
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 4   

 178          *
 179          * Summary:
 180          *  This function is called every year.
 181          *
 182          * Parameters:
 183          *  None.
 184          *
 185          * Return:
 186          *  None.
 187          *
 188          *******************************************************************************/
 189          static void RTC_EveryYearHandler(void)
 190          {
 191   1          /*  Place your every year handler code here. */
 192   1          /* `#START EVERY_YEAR_HANDLER_CODE` */
 193   1      
 194   1          /* `#END` */
 195   1      }
 196          
 197          
 198          /*******************************************************************************
 199          * Function Name: RTC_ISR
 200          ********************************************************************************
 201          *
 202          * Summary:
 203          *  This ISR is executed on 1PPS (one pulse per second) event.
 204          *  Global interrupt must be enabled to invoke this ISR.
 205          *  This interrupt trigs every second.
 206          *
 207          * Parameters:
 208          *  None.
 209          *
 210          * Return:
 211          *  None.
 212          *
 213          * Global variables:
 214          * RTC_currentTimeDate, RTC_dstTimeDateStart,
 215          *  RTC_dstTimeDateStop, RTC_dstTimeDateStart,
 216          *  RTC_alarmCfgTimeDate, RTC_statusDateTime,
 217          *  RTC_dstStartStatus, RTC_dstStartStatus,
 218          *  RTC_dstStopStatus, RTC_alarmCurStatus: global
 219          *  variables are used for the time/date, DST and alarm update procedure.
 220          *
 221          *  RTC_dstTimeDateStart and RTC_currentTimeDate:
 222          *  are modified with the updated values.
 223          *
 224          *  RTC_statusDateTime, RTC_dstStartStatus,
 225          *  RTC_dstStartStatus, RTC_dstStopStatus,
 226          *  RTC_alarmCurStatus: global variables could be modified while
 227          *  current time/date is updated.
 228          *
 229          * Side Effects:
 230          *  Clears all interrupt status bits (react_int, limact_int, onepps_int, ctw_int,
 231          *  and  ftw_int) in Power Manager Interrupt Status Register. If an interrupt
 232          *  gets generated at the same time as a clear, the bit will remain set (which
 233          *  causes another interrupt).
 234          *
 235          *******************************************************************************/
 236          CY_ISR(RTC_ISR)
 237          {
 238   1          uint8 RTC_tmp;
 239   1      
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 5   

 240   1          /* Clear OPPS interrupt status flag */
 241   1          (void) CyPmReadStatus(CY_PM_ONEPPS_INT);
 242   1      
 243   1          /* Increment seconds counter */
 244   1          RTC_currentTimeDate.Sec++;
 245   1      
 246   1          /* Check if minute elapsed */
 247   1          if(RTC_currentTimeDate.Sec > RTC_MINUTE_ELAPSED)
 248   1          {
 249   2              /* Inc Min */
 250   2              RTC_currentTimeDate.Min++;
 251   2      
 252   2              /* Clear Sec */
 253   2              RTC_currentTimeDate.Sec = 0u;
 254   2      
 255   2              if(RTC_currentTimeDate.Min > RTC_HOUR_ELAPSED)
 256   2              {
 257   3                  /* Inc HOUR */
 258   3                  RTC_currentTimeDate.Hour++;
 259   3      
 260   3                  /* Clear Min */
 261   3                  RTC_currentTimeDate.Min = 0u;
 262   3      
 263   3                  /* Day roll over */
 264   3                  if(RTC_currentTimeDate.Hour > RTC_DAY_ELAPSED)
 265   3                  {
 266   4                      /* Inc DayOfMonth */
 267   4                      RTC_currentTimeDate.DayOfMonth++;
 268   4      
 269   4                      /* Clear Hour */
 270   4                      RTC_currentTimeDate.Hour = 0u;
 271   4      
 272   4                      /* Inc DayOfYear */
 273   4                      RTC_currentTimeDate.DayOfYear++;
 274   4      
 275   4                      /* Inc DayOfWeek */
 276   4                      RTC_currentTimeDate.DayOfWeek++;
 277   4      
 278   4                      /* Check DayOfWeek */
 279   4                      if(RTC_currentTimeDate.DayOfWeek > RTC_WEEK_ELAPSED)
 280   4                      {
 281   5                          /* start new week */
 282   5                          RTC_currentTimeDate.DayOfWeek = 1u;
 283   5                      }
 284   4      
 285   4                      /* Day of month roll over.
 286   4                      * Check if day of month greater than 29 in February of leap year or
 287   4                      * if day of month greater than 28 NOT in February of NON leap year or
 288   4                      * if day of month greater than it should be in every month in non leap year
 289   4                      */
 290   4                      if(((0u != (RTC_statusDateTime & RTC_STATUS_LY)) &&
 291   4                          (RTC_currentTimeDate.Month == RTC_FEBRUARY)  &&
 292   4                          (RTC_currentTimeDate.DayOfMonth >
 293   4                                   (RTC_daysInMonths[RTC_currentTimeDate.Month - 1u] + 1u))) ||
 294   4                         ((0u != (RTC_statusDateTime & RTC_STATUS_LY))  &&
 295   4                          (RTC_currentTimeDate.Month != RTC_FEBRUARY) &&
 296   4                          (RTC_currentTimeDate.DayOfMonth >
 297   4                                          RTC_daysInMonths[RTC_currentTimeDate.Month - 1u])) ||
 298   4                         ((0u == (RTC_statusDateTime & RTC_STATUS_LY))  &&
 299   4                          (RTC_currentTimeDate.DayOfMonth >
 300   4                                          RTC_daysInMonths[RTC_currentTimeDate.Month - 1u])))
 301   4                      {
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 6   

 302   5                          /* Inc Month */
 303   5                          RTC_currentTimeDate.Month++;
 304   5      
 305   5                          /* Set first day of month */
 306   5                          RTC_currentTimeDate.DayOfMonth = 1u;
 307   5      
 308   5                          /* Year roll over */
 309   5                          if(RTC_currentTimeDate.Month > RTC_YEAR_ELAPSED)
 310   5                          {
 311   6                              /* Inc Year */
 312   6                              RTC_currentTimeDate.Year++;
 313   6      
 314   6                              /* Set first month of year */
 315   6                              RTC_currentTimeDate.Month = 1u;
 316   6      
 317   6                              /* Set first day of year */
 318   6                              RTC_currentTimeDate.DayOfYear = 1u;
 319   6      
 320   6                              /* Is this year leap */
 321   6                              if(1u == RTC_LEAP_YEAR(RTC_currentTimeDate.Year))
 322   6                              {
 323   7                                  /* Set leap year flag */
 324   7                                  RTC_statusDateTime |= RTC_STATUS_LY;
 325   7                              }
 326   6                              else    /* not leap year */
 327   6                              {
 328   7                                  /* Clear leap year */
 329   7                                  RTC_statusDateTime &= (uint8)(~RTC_STATUS_LY);
 330   7                              }
 331   6      
 332   6                              /* Alarm YEAR */
 333   6                              if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
 334   6                                                                   RTC_ALARM_YEAR_MASK))
 335   6                              {
 336   7                                  /* Years match */
 337   7                                  if(RTC_alarmCfgTimeDate.Year == RTC_currentTimeDate.Year)
 338   7                                  {
 339   8                                      /* Rise year alarm */
 340   8                                      RTC_alarmCurStatus |= RTC_ALARM_YEAR_MASK;
 341   8                                  }
 342   7                                  else    /* Years do not match */
 343   7                                  {
 344   8                                      /* Clear year alarm */
 345   8                                      RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_YEAR_MASK);
 346   8                                  }
 347   7                              } /* do not alarm year */
 348   6      
 349   6                              /* Set Alarm flag event */
 350   6                              RTC_tmp = RTC_alarmCfgMask;
 351   6                              RTC_SET_ALARM(RTC_tmp,
 353   6                                                         RTC_alarmCurStatus,
 353   6                                                         RTC_statusDateTime);
 354   6      
 355   6                              /* Every Year */
 356   6                              if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask,
 357   6                                                                   RTC_INTERVAL_YEAR_MASK))
 358   6                              {
 359   7                                  RTC_EveryYearHandler();
 360   7                              }
 361   6      
 362   6                          } /* Month > 12 */
 363   5      
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 7   

 364   5                          /* Alarm MONTH */
 365   5                          if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
 366   5                                                               RTC_ALARM_MONTH_MASK))
 367   5                          {
 368   6                              if(RTC_alarmCfgTimeDate.Month == RTC_currentTimeDate.Month)
 369   6                              {
 370   7                                  /* Set month alarm */
 371   7                                  RTC_alarmCurStatus |= RTC_ALARM_MONTH_MASK;
 372   7                              }
 373   6                              else
 374   6                              {
 375   7                                  /* Clear month alarm */
 376   7                                  RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_MONTH_MASK);
 377   7                              }
 378   6                          }   /* Month alarm is masked */
 379   5      
 380   5                          #if (1u == RTC_DST_FUNC_ENABLE)
                                      if(RTC_dstTimeDateStop.Month == RTC_currentTimeDate.Month)
                                      {
                                          RTC_dstStopStatus |= RTC_DST_MONTH;
                                      }
                                      else
                                      {
                                          RTC_dstStopStatus &= (uint8)(~RTC_DST_MONTH);
                                      }
              
                                      if(RTC_dstTimeDateStart.Month == RTC_currentTimeDate.Month)
                                      {
                                          RTC_dstStartStatus |= RTC_DST_MONTH;
                                      }
                                      else
                                      {
                                          RTC_dstStartStatus &= (uint8)(~RTC_DST_MONTH);
                                      }
                                  #endif /* 1u == RTC_DST_FUNC_ENABLE */
 399   5      
 400   5                          /* Set Alarm flag event */
 401   5                          RTC_tmp = RTC_alarmCfgMask;
 402   5                          RTC_SET_ALARM(RTC_tmp,
 404   5                                                     RTC_alarmCurStatus,
 404   5                                                     RTC_statusDateTime);
 405   5      
 406   5                          /* Every Month */
 407   5                          if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask,
 408   5                                                               RTC_INTERVAL_MONTH_MASK))
 409   5                          {
 410   6                              RTC_EveryMonthHandler();
 411   6                          }
 412   5                      }   /* Day roll over */
 413   4      
 414   4                      /* Alarm DAYOFWEEK */
 415   4                      if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
 416   4                                                           RTC_ALARM_DAYOFWEEK_MASK))
 417   4                      {
 418   5                          if(RTC_alarmCfgTimeDate.DayOfWeek == RTC_currentTimeDate.DayOfWeek)
 419   5                          {
 420   6                              /* Set day of week alarm */
 421   6                              RTC_alarmCurStatus |= RTC_ALARM_DAYOFWEEK_MASK;
 422   6                          }
 423   5                          else
 424   5                          {
 425   6                              /* Clear day of week alarm */
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 8   

 426   6                              RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFWEEK_MASK);
 427   6                          }
 428   5                      }   /* Day of week alarm is masked */
 429   4      
 430   4                      /* Alarm DAYOFYEAR */
 431   4                      if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
 432   4                                                           RTC_ALARM_DAYOFYEAR_MASK))
 433   4                      {
 434   5                          if(RTC_alarmCfgTimeDate.DayOfYear == RTC_currentTimeDate.DayOfYear)
 435   5                          {
 436   6                              /* Set day of year alarm */
 437   6                              RTC_alarmCurStatus |= RTC_ALARM_DAYOFYEAR_MASK;
 438   6                          }
 439   5                          else
 440   5                          {
 441   6                              /* Clear day of year alarm */
 442   6                              RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFYEAR_MASK);
 443   6                          }
 444   5                      }   /* Day of year alarm is masked */
 445   4      
 446   4                      /* Alarm DAYOFMONTH */
 447   4                      if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
 448   4                               RTC_ALARM_DAYOFMONTH_MASK))
 449   4                      {
 450   5                          if(RTC_alarmCfgTimeDate.DayOfMonth == RTC_currentTimeDate.DayOfMonth)
 451   5                          {
 452   6                              /* Set day of month alarm */
 453   6                              RTC_alarmCurStatus |= RTC_ALARM_DAYOFMONTH_MASK;
 454   6                          }
 455   5                          else
 456   5                          {
 457   6                              /* Clear day of month alarm */
 458   6                              RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFMONTH_MASK);
 459   6                          }
 460   5                      }   /* Day of month alarm is masked */
 461   4      
 462   4                      #if (1u == RTC_DST_FUNC_ENABLE)
                                  if(RTC_dstTimeDateStop.DayOfMonth == RTC_currentTimeDate.DayOfMonth)
                                  {
                                      RTC_dstStopStatus |= RTC_DST_DAYOFMONTH;
                                  }
                                  else
                                  {
                                      RTC_dstStopStatus &= (uint8)(~RTC_DST_DAYOFMONTH);
                                  }
              
                                  if(RTC_dstTimeDateStart.DayOfMonth == RTC_currentTimeDate.DayOfMonth)
                                  {
                                      RTC_dstStartStatus |= RTC_DST_DAYOFMONTH;
                                  }
                                  else
                                  {
                                      RTC_dstStartStatus &= (uint8)(~RTC_DST_DAYOFMONTH);
                                  }
                              #endif /* 1u == RTC_DST_FUNC_ENABLE */
 481   4      
 482   4                      /* Set Alarm flag event */
 483   4                      RTC_tmp = RTC_alarmCfgMask;
 484   4                      RTC_SET_ALARM(RTC_tmp,
 486   4                                                 RTC_alarmCurStatus,
 486   4                                                 RTC_statusDateTime);
 487   4      
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 9   

 488   4                      /* Every Day */
 489   4                      if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask,
 490   4                               RTC_INTERVAL_DAY_MASK))
 491   4                      {
 492   5                          RTC_EveryDayHandler();
 493   5                      }
 494   4      
 495   4                      if(1u == RTC_currentTimeDate.DayOfWeek)
 496   4                      {
 497   5                          /* Every Week */
 498   5                          if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask,
 499   5                                                               RTC_INTERVAL_WEEK_MASK))
 500   5                          {
 501   6                             RTC_EveryWeekHandler();
 502   6                          }
 503   5                      }
 504   4      
 505   4                  } /* End of day roll over */
 506   3      
 507   3                  /* Status set PM/AM flag */
 508   3                  if(RTC_currentTimeDate.Hour < RTC_HALF_OF_DAY_ELAPSED)
 509   3                  {
 510   4                      /* AM Hour 00:00-11:59, flag zero */
 511   4                      RTC_statusDateTime &= (uint8)(~RTC_STATUS_AM_PM);
 512   4                  }
 513   3                  else
 514   3                  {
 515   4                      /* PM Hour 12:00-23:59, flag set */
 516   4                      RTC_statusDateTime |= RTC_STATUS_AM_PM;
 517   4                  }
 518   3      
 519   3                  #if (1u == RTC_DST_FUNC_ENABLE)
                              if(RTC_dstTimeDateStop.Hour == RTC_currentTimeDate.Hour)
                              {
                                  RTC_dstStopStatus |= RTC_DST_HOUR;
                              }
                              else
                              {
                                  RTC_dstStopStatus &= (uint8)(~RTC_DST_HOUR);
                              }
              
                              if(RTC_dstTimeDateStart.Hour == RTC_currentTimeDate.Hour)
                              {
                                  RTC_dstStartStatus |= RTC_DST_HOUR;
                              }
                              else
                              {
                              RTC_dstStartStatus &= (uint8)(~RTC_DST_HOUR);
                              }
              
                              /* DST Enable ? */
                              if(0u != RTC_IS_BIT_SET(RTC_dstModeType, RTC_DST_ENABLE))
                              {
                                  if(0u != RTC_IS_BIT_SET(RTC_statusDateTime, RTC_STATUS_DST))
                                  {
                                      if(0u != RTC_IS_BIT_SET(RTC_dstStopStatus, RTC_DST_HOUR |
                                                                     RTC_DST_DAYOFMONTH | RTC_DST_MONTH))
                                      {
                                          /* Substruct from current value of minutes, number of minutes
                                          * in DST offset which is out of complete hour
                                          */
                                          RTC_currentTimeDate.Min -=
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 10  

                                                              RTC_dstOffsetMin % (RTC_HOUR_ELAPSED + 1u);
              
                                          /* Is minute value negative? */
                                          if(RTC_currentTimeDate.Min > RTC_HOUR_ELAPSED)
                                          {
                                              /* Convert to the positive.
                                              * HOUR_ELAPSED -     (~currentTimeDate.Min    ) ==
                                              * HOUR_ELAPSED + 1 - (~currentTimeDate.Min + 1)
                                              */
                                              RTC_currentTimeDate.Min = RTC_HOUR_ELAPSED -
                                                                           ((uint8)(~RTC_currentTimeDate.Min));
              
                                              RTC_currentTimeDate.Hour--;
                                          }
              
                                          RTC_currentTimeDate.Hour -= RTC_dstOffsetMin /
                                                                                   (RTC_HOUR_ELAPSED + 1u);
              
                                          /* Day roll over
                                          * Is hour value negative? */
                                          if(RTC_currentTimeDate.Hour > RTC_DAY_ELAPSED)
                                          {
                                              /* Convert to the positive.
                                              * DAY_ELAPSED - (~currentTimeDate.Hour) ==
                                              * DAY_ELAPSED + 1 - (~currentTimeDate.Hour + 1)
                                              */
                                              RTC_currentTimeDate.Hour = RTC_DAY_ELAPSED -
                                                                            ((uint8)(~RTC_currentTimeDate.Hour));
              
                                              /* Status set PM/AM flag */
                                              if(RTC_currentTimeDate.Hour < RTC_HALF_OF_DAY_ELAPSED)
                                              {
                                                  /* AM Hour 00:00-11:59, flag zero */
                                                  RTC_statusDateTime &= (uint8)(~RTC_STATUS_AM_PM);
                                              }
                                              else
                                              {
                                                  /* PM Hour 12:00-23:59, flag set */
                                                  RTC_statusDateTime |= RTC_STATUS_AM_PM;
                                              }
              
                                              RTC_currentTimeDate.DayOfMonth--;
                                              RTC_currentTimeDate.DayOfYear--;
                                              RTC_currentTimeDate.DayOfWeek--;
              
                                              if(0u == RTC_currentTimeDate.DayOfWeek)
                                              {
                                                  RTC_currentTimeDate.DayOfWeek = RTC_DAYS_IN_WEEK;
                                              }
              
                                              if(0u == RTC_currentTimeDate.DayOfMonth)
                                              {
                                                  RTC_currentTimeDate.Month--;
                                                  if(0u == RTC_currentTimeDate.Month)
                                                  {
                                                      RTC_currentTimeDate.Month = RTC_DECEMBER;
              
                                                      RTC_currentTimeDate.DayOfMonth =
                                                          RTC_daysInMonths[RTC_currentTimeDate.Month - 1u];
              
                                                      RTC_currentTimeDate.Year--;
              
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 11  

                                                      if(1u == RTC_LEAP_YEAR(RTC_currentTimeDate.Year))
                                                      {
                                                          /* LP - true, else - false */
                                                          RTC_statusDateTime |= RTC_STATUS_LY;
                                                          RTC_currentTimeDate.DayOfYear =
                                                                                                  RTC_DAYS_IN_LEAP_YEAR;
                                                      }
                                                      else
                                                      {
                                                          RTC_statusDateTime &= (uint8)(~RTC_STATUS_LY);
                                                          RTC_currentTimeDate.DayOfYear = RTC_DAYS_IN_YEAR;
                                                      }
                                                      RTC_EveryYearHandler();
                                                  }
                                                  else
                                                  {
                                                      /* Day of month roll over.
                                                      * Check if day of month February 29 of leap year
                                                      */
                                                      if((0u != (RTC_statusDateTime & RTC_STATUS_LY)) &&
                                                          (RTC_currentTimeDate.Month == RTC_FEBRUARY))
                                                      {
                                                          RTC_currentTimeDate.DayOfMonth =
                                                          RTC_daysInMonths[RTC_currentTimeDate.Month - 1u]
                                                          + 1u;
                                                      }
                                                      else
                                                      {
                                                          RTC_currentTimeDate.DayOfMonth =
                                                          RTC_daysInMonths[RTC_currentTimeDate.Month - 1u];
                                                      }
                                                  }
                                                  RTC_EveryMonthHandler();
                                              }
                                              RTC_EveryDayHandler();
                                          }
                                          RTC_statusDateTime &= (uint8)(~RTC_STATUS_DST);
                                          RTC_dstStopStatus = 0u;
                                      }
                                  }
                                  else
                                  {
                                      if(0u != RTC_IS_BIT_SET(RTC_dstStartStatus,
                                                                    (RTC_DST_HOUR | RTC_DST_DAYOFMONTH |
                                                                     RTC_DST_MONTH)))
                                      {
                                          /* Add Hour and Min */
                                          RTC_currentTimeDate.Min +=
                                                              RTC_dstOffsetMin % (RTC_HOUR_ELAPSED + 1u);
              
                                          if(RTC_currentTimeDate.Min > RTC_HOUR_ELAPSED)
                                          {
                                              /* Adjust Min */
                                              RTC_currentTimeDate.Min -= (RTC_HOUR_ELAPSED + 1u);
                                              RTC_currentTimeDate.Hour++;
                                          }
              
                                          RTC_currentTimeDate.Hour += RTC_dstOffsetMin /
                                                                                   (RTC_HOUR_ELAPSED + 1u);
              
                                          if(RTC_currentTimeDate.Hour > RTC_DAY_ELAPSED)
                                          {
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 12  

                                              /* Adjust hour, add day */
                                              RTC_currentTimeDate.Hour -= (RTC_DAY_ELAPSED + 1u);
              
                                              /* Status set PM/AM flag */
                                              if(RTC_currentTimeDate.Hour < RTC_HALF_OF_DAY_ELAPSED)
                                              {
                                                  /* AM Hour 00:00-11:59, flag zero */
                                                  RTC_statusDateTime &= (uint8)(~RTC_STATUS_AM_PM);
                                              }
                                              else
                                              {
                                                  /* PM Hour 12:00-23:59, flag set */
                                                  RTC_statusDateTime |= RTC_STATUS_AM_PM;
                                              }
              
                                              RTC_currentTimeDate.DayOfMonth++;
                                              RTC_currentTimeDate.DayOfYear++;
                                              RTC_currentTimeDate.DayOfWeek++;
              
                                              if(RTC_currentTimeDate.DayOfWeek > RTC_WEEK_ELAPSED)
                                              {
                                                  RTC_currentTimeDate.DayOfWeek = 1u;
                                              }
              
                                              /* Day of month roll over.
                                              * Check if day of month greater than 29 in February of leap year or
                                              * if day of month greater than 28 NOT in February of NON leap year or
                                              * if day of month greater than it should be in every month in non leap yea
             -r
                                              */
                                              if(((0u != (RTC_statusDateTime & RTC_STATUS_LY)) &&
                                                  (RTC_currentTimeDate.Month == RTC_FEBRUARY)  &&
                                                  (RTC_currentTimeDate.DayOfMonth >
                                                (RTC_daysInMonths[RTC_currentTimeDate.Month - 1u] + 1u))) ||
                                                 ((0u != (RTC_statusDateTime & RTC_STATUS_LY)) &&
                                                  (RTC_currentTimeDate.Month != RTC_FEBRUARY)  &&
                                                  (RTC_currentTimeDate.DayOfMonth >
                                                   RTC_daysInMonths[RTC_currentTimeDate.Month - 1u])) ||
                                                 ((0u == (RTC_statusDateTime & RTC_STATUS_LY)) &&
                                                  (RTC_currentTimeDate.DayOfMonth >
                                                   RTC_daysInMonths[RTC_currentTimeDate.Month - 1u])))
                                              {
                                                  RTC_currentTimeDate.Month++;
                                                  RTC_currentTimeDate.DayOfMonth = 1u;
                                                  if(RTC_currentTimeDate.Month > RTC_YEAR_ELAPSED)
                                                  {
                                                      RTC_currentTimeDate.Month = RTC_JANUARY;
                                                      RTC_currentTimeDate.Year++;
              
                                                      if(1u == RTC_LEAP_YEAR(RTC_currentTimeDate.Year))
                                                      {
                                                          /* LP - true, else - false */
                                                          RTC_statusDateTime |= RTC_STATUS_LY;
                                                      }
                                                      else
                                                      {
                                                          RTC_statusDateTime &= (uint8)(~RTC_STATUS_LY);
                                                      }
                                                      RTC_currentTimeDate.DayOfYear = 1u;
              
                                                      RTC_EveryYearHandler();
                                                  }
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 13  

                                                  RTC_EveryMonthHandler();
                                              }
                                              RTC_EveryDayHandler();
                                          }
                                          RTC_statusDateTime |= RTC_STATUS_DST;
                                          RTC_dstStartStatus = 0u;
              
                                          /* Month */
                                          if(RTC_dstTimeDateStop.Month == RTC_currentTimeDate.Month)
                                          {
                                              RTC_dstStopStatus |= RTC_DST_MONTH;
                                          }
                                          else
                                          {
                                              RTC_dstStopStatus &= (uint8)(~RTC_DST_MONTH);
                                          }
              
                                          /* DayOfMonth */
                                          if(RTC_dstTimeDateStop.DayOfMonth ==
                                                                                          RTC_currentTimeDate.DayOfMonth
             -)
                                          {
                                              RTC_dstStopStatus |= RTC_DST_DAYOFMONTH;
                                          }
                                          else
                                          {
                                              RTC_dstStopStatus &= (uint8)(~RTC_DST_DAYOFMONTH);
                                          }
                                      }
                                  }
              
                                  /* Alarm DAYOFWEEK */
                                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
                                                                       RTC_ALARM_DAYOFWEEK_MASK))
                                  {
                                      if(RTC_alarmCfgTimeDate.DayOfWeek == RTC_currentTimeDate.DayOfWeek)
                                      {
                                          RTC_alarmCurStatus |= RTC_ALARM_DAYOFWEEK_MASK;
                                      }
                                      else
                                      {
                                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFWEEK_MASK);
                                      }
                                  }
              
                                  /* Alarm DAYOFYEAR */
                                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
                                                                       RTC_ALARM_DAYOFYEAR_MASK))
                                  {
                                      if(RTC_alarmCfgTimeDate.DayOfYear == RTC_currentTimeDate.DayOfYear)
                                      {
                                          RTC_alarmCurStatus |= RTC_ALARM_DAYOFYEAR_MASK;
                                      }
                                      else
                                      {
                                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFYEAR_MASK);
                                      }
                                  }
              
                                  /* Alarm DAYOFMONTH */
                                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
                                                                       RTC_ALARM_DAYOFMONTH_MASK))
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 14  

                                  {
                                      if(RTC_alarmCfgTimeDate.DayOfMonth == RTC_currentTimeDate.DayOfMonth)
                                      {
                                          RTC_alarmCurStatus |= RTC_ALARM_DAYOFMONTH_MASK;
                                      }
                                      else
                                      {
                                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_DAYOFMONTH_MASK);
                                      }
                                  }
              
                                  /* Alarm MONTH */
                                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
                                                                       RTC_ALARM_MONTH_MASK))
                                  {
                                      if(RTC_alarmCfgTimeDate.Month == RTC_currentTimeDate.Month)
                                      {
                                          RTC_alarmCurStatus |= RTC_ALARM_MONTH_MASK;
                                      }
                                      else
                                      {
                                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_MONTH_MASK);
                                      }
                                  }
              
                                  /* Alarm YEAR */
                                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask,
                                                                       RTC_ALARM_YEAR_MASK))
                                  {
                                      if(RTC_alarmCfgTimeDate.Year == RTC_currentTimeDate.Year)
                                      {
                                          RTC_alarmCurStatus |= RTC_ALARM_YEAR_MASK;
                                      }
                                      else
                                      {
                                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_YEAR_MASK);
                                      }
                                  }
              
                                  /* Set Alarm flag event */
                                  RTC_tmp = RTC_alarmCfgMask;
                                  RTC_SET_ALARM(RTC_tmp,
                                                             RTC_alarmCurStatus,
                                                             RTC_statusDateTime);
                              }
                          #endif /* 1u == RTC_DST_FUNC_ENABLE */
 842   3      
 843   3                  /* Alarm HOUR */
 844   3                  if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask, RTC_ALARM_HOUR_MASK))
 845   3                  {
 846   4                      if(RTC_alarmCfgTimeDate.Hour == RTC_currentTimeDate.Hour)
 847   4                      {
 848   5                          RTC_alarmCurStatus |= RTC_ALARM_HOUR_MASK;
 849   5                      }
 850   4                      else
 851   4                      {
 852   5                          RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_HOUR_MASK);
 853   5                      }
 854   4                  }
 855   3      
 856   3                  /* Set Alarm flag event */
 857   3                  RTC_tmp = RTC_alarmCfgMask;
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 15  

 858   3                  RTC_SET_ALARM(RTC_tmp,
 860   3                                             RTC_alarmCurStatus,
 860   3                                             RTC_statusDateTime);
 861   3      
 862   3                  /* Every Hour */
 863   3                  if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask, RTC_INTERVAL_HOUR_MASK))
 864   3                  {
 865   4                      RTC_EveryHourHandler();
 866   4                  }
 867   3              } /* Min > 59 = Hour */
 868   2      
 869   2              /* Alarm MIN */
 870   2              if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask, RTC_ALARM_MIN_MASK))
 871   2              {
 872   3                  if(RTC_alarmCfgTimeDate.Min == RTC_currentTimeDate.Min)
 873   3                  {
 874   4                      RTC_alarmCurStatus |= RTC_ALARM_MIN_MASK;
 875   4                  }
 876   3                  else
 877   3                  {
 878   4                      RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_MIN_MASK);
 879   4                  }
 880   3              }
 881   2      
 882   2              /* Set Alarm flag event */
 883   2              RTC_tmp = RTC_alarmCfgMask;
 884   2              RTC_SET_ALARM(RTC_tmp,
 886   2                                         RTC_alarmCurStatus,
 886   2                                         RTC_statusDateTime);
 887   2      
 888   2              /* Every Min */
 889   2              if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask, RTC_INTERVAL_MIN_MASK))
 890   2              {
 891   3                  RTC_EveryMinuteHandler();
 892   3              }
 893   2          } /* Sec */
 894   1      
 895   1          /* Alarm SEC */
 896   1          if(0u != RTC_IS_BIT_SET(RTC_alarmCfgMask, RTC_ALARM_SEC_MASK))
 897   1          {
 898   2              if(RTC_alarmCfgTimeDate.Sec == RTC_currentTimeDate.Sec)
 899   2              {
 900   3                  RTC_alarmCurStatus |= RTC_ALARM_SEC_MASK;
 901   3              }
 902   2              else
 903   2              {
 904   3                  RTC_alarmCurStatus &= (uint8)(~RTC_ALARM_SEC_MASK);
 905   3              }
 906   2          }
 907   1      
 908   1          /* Set Alarm flag event */
 909   1          RTC_tmp = RTC_alarmCfgMask;
 910   1          RTC_SET_ALARM(RTC_tmp, RTC_alarmCurStatus, RTC_statusDateTime);
 911   1      
 912   1          /* Execute every second handler if needed */
 913   1          if(0u != RTC_IS_BIT_SET(RTC_intervalCfgMask, RTC_INTERVAL_SEC_MASK))
 914   1          {
 915   2              RTC_EverySecondHandler();
 916   2          }
 917   1      
 918   1      }
 919          
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 16  

 920          
 921          /* [] END OF FILE */
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 17  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION RTC_EverySecondHandler (BEGIN)
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 57
0000         ?C0001:
0000 22                RET     
             ; FUNCTION RTC_EverySecondHandler (END)

             ; FUNCTION RTC_EveryMinuteHandler (BEGIN)
                                           ; SOURCE LINE # 74
                                           ; SOURCE LINE # 75
                                           ; SOURCE LINE # 80
0000         ?C0002:
0000 22                RET     
             ; FUNCTION RTC_EveryMinuteHandler (END)

             ; FUNCTION RTC_EveryHourHandler (BEGIN)
                                           ; SOURCE LINE # 97
                                           ; SOURCE LINE # 98
                                           ; SOURCE LINE # 103
0000         ?C0003:
0000 22                RET     
             ; FUNCTION RTC_EveryHourHandler (END)

             ; FUNCTION RTC_EveryDayHandler (BEGIN)
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
                                           ; SOURCE LINE # 126
0000         ?C0004:
0000 22                RET     
             ; FUNCTION RTC_EveryDayHandler (END)

             ; FUNCTION RTC_EveryWeekHandler (BEGIN)
                                           ; SOURCE LINE # 143
                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 149
0000         ?C0005:
0000 22                RET     
             ; FUNCTION RTC_EveryWeekHandler (END)

             ; FUNCTION RTC_EveryMonthHandler (BEGIN)
                                           ; SOURCE LINE # 166
                                           ; SOURCE LINE # 167
                                           ; SOURCE LINE # 172
0000         ?C0006:
0000 22                RET     
             ; FUNCTION RTC_EveryMonthHandler (END)

             ; FUNCTION RTC_EveryYearHandler (BEGIN)
                                           ; SOURCE LINE # 189
                                           ; SOURCE LINE # 190
                                           ; SOURCE LINE # 195
0000         ?C0007:
0000 22                RET     
             ; FUNCTION RTC_EveryYearHandler (END)

             ; FUNCTION RTC_ISR (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 18  

0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 236
                                           ; SOURCE LINE # 241
002B 7F04              MOV     R7,#04H
002D 120000      E     LCALL   _CyPmReadStatus
                                           ; SOURCE LINE # 244
0030 900000      E     MOV     DPTR,#RTC_currentTimeDate
0033 E0                MOVX    A,@DPTR
0034 04                INC     A
0035 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 247
0036 900000      E     MOV     DPTR,#RTC_currentTimeDate
0039 E0                MOVX    A,@DPTR
003A FF                MOV     R7,A
003B EF                MOV     A,R7
003C D3                SETB    C
003D 943B              SUBB    A,#03BH
003F 5003              JNC     $ + 5H
0041 020000      R     LJMP    ?C0008
                                           ; SOURCE LINE # 248
                                           ; SOURCE LINE # 250
0044 900000      E     MOV     DPTR,#RTC_currentTimeDate+01H
0047 E0                MOVX    A,@DPTR
0048 04                INC     A
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 253
004A 900000      E     MOV     DPTR,#RTC_currentTimeDate
004D E4                CLR     A
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 255
004F 900000      E     MOV     DPTR,#RTC_currentTimeDate+01H
0052 E0                MOVX    A,@DPTR
0053 FF                MOV     R7,A
0054 EF                MOV     A,R7
0055 D3                SETB    C
0056 943B              SUBB    A,#03BH
0058 5003              JNC     $ + 5H
005A 020000      R     LJMP    ?C0009
                                           ; SOURCE LINE # 256
                                           ; SOURCE LINE # 258
005D 900000      E     MOV     DPTR,#RTC_currentTimeDate+02H
0060 E0                MOVX    A,@DPTR
0061 04                INC     A
0062 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 261
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 19  

0063 900000      E     MOV     DPTR,#RTC_currentTimeDate+01H
0066 E4                CLR     A
0067 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 264
0068 900000      E     MOV     DPTR,#RTC_currentTimeDate+02H
006B E0                MOVX    A,@DPTR
006C FF                MOV     R7,A
006D EF                MOV     A,R7
006E D3                SETB    C
006F 9417              SUBB    A,#017H
0071 5003              JNC     $ + 5H
0073 020000      R     LJMP    ?C0010
                                           ; SOURCE LINE # 265
                                           ; SOURCE LINE # 267
0076 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
0079 E0                MOVX    A,@DPTR
007A 04                INC     A
007B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 270
007C 900000      E     MOV     DPTR,#RTC_currentTimeDate+02H
007F E4                CLR     A
0080 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 273
0081 900000      E     MOV     DPTR,#RTC_currentTimeDate+05H
0084 E4                CLR     A
0085 75F001            MOV     B,#01H
0088 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 276
008B 900000      E     MOV     DPTR,#RTC_currentTimeDate+03H
008E E0                MOVX    A,@DPTR
008F 04                INC     A
0090 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 279
0091 900000      E     MOV     DPTR,#RTC_currentTimeDate+03H
0094 E0                MOVX    A,@DPTR
0095 FF                MOV     R7,A
0096 EF                MOV     A,R7
0097 D3                SETB    C
0098 9407              SUBB    A,#07H
009A 4006              JC      ?C0011
                                           ; SOURCE LINE # 280
                                           ; SOURCE LINE # 282
009C 900000      E     MOV     DPTR,#RTC_currentTimeDate+03H
009F 7401              MOV     A,#01H
00A1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 283
00A2         ?C0011:
                                           ; SOURCE LINE # 290
00A2 900000      E     MOV     DPTR,#RTC_statusDateTime
00A5 E0                MOVX    A,@DPTR
00A6 FF                MOV     R7,A
00A7 EF                MOV     A,R7
00A8 5402              ANL     A,#02H
00AA FF                MOV     R7,A
00AB 7E00              MOV     R6,#00H
00AD EF                MOV     A,R7
00AE 4E                ORL     A,R6
00AF 602C              JZ      ?C0014
00B1 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 EF                MOV     A,R7
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 20  

00B7 B40223            CJNE    A,#02H,?C0014
00BA 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
00BD E0                MOVX    A,@DPTR
00BE FF                MOV     R7,A
00BF EF                MOV     A,R7
00C0 900000      E     MOV     DPTR,#RTC_daysInMonths-01H
00C3 93                MOVC    A,@A+DPTR
00C4 FF                MOV     R7,A
00C5 7E00              MOV     R6,#00H
00C7 EF                MOV     A,R7
00C8 2401              ADD     A,#01H
00CA FF                MOV     R7,A
00CB EE                MOV     A,R6
00CC 3400              ADDC    A,#00H
00CE FE                MOV     R6,A
00CF 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
00D2 E0                MOVX    A,@DPTR
00D3 FD                MOV     R5,A
00D4 7C00              MOV     R4,#00H
00D6 D3                SETB    C
00D7 ED                MOV     A,R5
00D8 9F                SUBB    A,R7
00D9 EC                MOV     A,R4
00DA 9E                SUBB    A,R6
00DB 5058              JNC     ?C0013
00DD         ?C0014:
00DD 900000      E     MOV     DPTR,#RTC_statusDateTime
00E0 E0                MOVX    A,@DPTR
00E1 FF                MOV     R7,A
00E2 EF                MOV     A,R7
00E3 5402              ANL     A,#02H
00E5 FF                MOV     R7,A
00E6 7E00              MOV     R6,#00H
00E8 EF                MOV     A,R7
00E9 4E                ORL     A,R6
00EA 601F              JZ      ?C0015
00EC 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
00EF E0                MOVX    A,@DPTR
00F0 FF                MOV     R7,A
00F1 EF                MOV     A,R7
00F2 6402              XRL     A,#02H
00F4 6015              JZ      ?C0015
00F6 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
00F9 E0                MOVX    A,@DPTR
00FA FF                MOV     R7,A
00FB EF                MOV     A,R7
00FC 900000      E     MOV     DPTR,#RTC_daysInMonths-01H
00FF 93                MOVC    A,@A+DPTR
0100 FF                MOV     R7,A
0101 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
0104 E0                MOVX    A,@DPTR
0105 FE                MOV     R6,A
0106 EE                MOV     A,R6
0107 D3                SETB    C
0108 9F                SUBB    A,R7
0109 502A              JNC     ?C0013
010B         ?C0015:
010B 900000      E     MOV     DPTR,#RTC_statusDateTime
010E E0                MOVX    A,@DPTR
010F FF                MOV     R7,A
0110 EF                MOV     A,R7
0111 5402              ANL     A,#02H
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 21  

0113 FF                MOV     R7,A
0114 7E00              MOV     R6,#00H
0116 EF                MOV     A,R7
0117 4E                ORL     A,R6
0118 6003              JZ      $ + 5H
011A 020000      R     LJMP    ?C0012
011D 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
0120 E0                MOVX    A,@DPTR
0121 FF                MOV     R7,A
0122 EF                MOV     A,R7
0123 900000      E     MOV     DPTR,#RTC_daysInMonths-01H
0126 93                MOVC    A,@A+DPTR
0127 FF                MOV     R7,A
0128 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
012B E0                MOVX    A,@DPTR
012C FE                MOV     R6,A
012D EE                MOV     A,R6
012E D3                SETB    C
012F 9F                SUBB    A,R7
0130 5003              JNC     $ + 5H
0132 020000      R     LJMP    ?C0012
0135         ?C0013:
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 303
0135 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
0138 E0                MOVX    A,@DPTR
0139 04                INC     A
013A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 306
013B 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
013E 7401              MOV     A,#01H
0140 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 309
0141 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
0144 E0                MOVX    A,@DPTR
0145 FF                MOV     R7,A
0146 EF                MOV     A,R7
0147 D3                SETB    C
0148 940C              SUBB    A,#0CH
014A 5003              JNC     $ + 5H
014C 020000      R     LJMP    ?C0016
                                           ; SOURCE LINE # 310
                                           ; SOURCE LINE # 312
014F 900000      E     MOV     DPTR,#RTC_currentTimeDate+08H
0152 E4                CLR     A
0153 75F001            MOV     B,#01H
0156 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 315
0159 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
015C 7401              MOV     A,#01H
015E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 318
015F 900000      E     MOV     DPTR,#RTC_currentTimeDate+05H
0162 E4                CLR     A
0163 F0                MOVX    @DPTR,A
0164 A3                INC     DPTR
0165 7401              MOV     A,#01H
0167 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 321
0168 900000      E     MOV     DPTR,#RTC_currentTimeDate+08H
016B E0                MOVX    A,@DPTR
016C FE                MOV     R6,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 22  

016D A3                INC     DPTR
016E E0                MOVX    A,@DPTR
016F FF                MOV     R7,A
0170 7C01              MOV     R4,#01H
0172 7D90              MOV     R5,#090H
0174 120000      E     LCALL   ?C?UIDIV
0177 ED                MOV     A,R5
0178 4C                ORL     A,R4
0179 6025              JZ      ?C0020
017B 900000      E     MOV     DPTR,#RTC_currentTimeDate+08H
017E E0                MOVX    A,@DPTR
017F FE                MOV     R6,A
0180 A3                INC     DPTR
0181 E0                MOVX    A,@DPTR
0182 FF                MOV     R7,A
0183 7E00              MOV     R6,#00H
0185 EF                MOV     A,R7
0186 5403              ANL     A,#03H
0188 FF                MOV     R7,A
0189 EF                MOV     A,R7
018A 4E                ORL     A,R6
018B 7017              JNZ     ?C0018
018D 900000      E     MOV     DPTR,#RTC_currentTimeDate+08H
0190 E0                MOVX    A,@DPTR
0191 FE                MOV     R6,A
0192 A3                INC     DPTR
0193 E0                MOVX    A,@DPTR
0194 FF                MOV     R7,A
0195 7C00              MOV     R4,#00H
0197 7D64              MOV     R5,#064H
0199 120000      E     LCALL   ?C?UIDIV
019C ED                MOV     A,R5
019D 4C                ORL     A,R4
019E 6004              JZ      ?C0018
01A0         ?C0020:
01A0 7F01              MOV     R7,#01H
01A2 8002              SJMP    ?C0019
01A4         ?C0018:
01A4 7F00              MOV     R7,#00H
01A6         ?C0019:
01A6 EF                MOV     A,R7
01A7 B40110            CJNE    A,#01H,?C0017
                                           ; SOURCE LINE # 322
                                           ; SOURCE LINE # 324
01AA 900000      E     MOV     DPTR,#RTC_statusDateTime
01AD E0                MOVX    A,@DPTR
01AE FF                MOV     R7,A
01AF EF                MOV     A,R7
01B0 4402              ORL     A,#02H
01B2 FF                MOV     R7,A
01B3 900000      E     MOV     DPTR,#RTC_statusDateTime
01B6 EF                MOV     A,R7
01B7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 325
01B8 800E              SJMP    ?C0021
01BA         ?C0017:
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 329
01BA 900000      E     MOV     DPTR,#RTC_statusDateTime
01BD E0                MOVX    A,@DPTR
01BE FF                MOV     R7,A
01BF EF                MOV     A,R7
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 23  

01C0 54FD              ANL     A,#0FDH
01C2 FF                MOV     R7,A
01C3 900000      E     MOV     DPTR,#RTC_statusDateTime
01C6 EF                MOV     A,R7
01C7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 330
01C8         ?C0021:
                                           ; SOURCE LINE # 333
01C8 900000      E     MOV     DPTR,#RTC_alarmCfgMask
01CB E0                MOVX    A,@DPTR
01CC FF                MOV     R7,A
01CD EF                MOV     A,R7
01CE 5480              ANL     A,#080H
01D0 FF                MOV     R7,A
01D1 7E00              MOV     R6,#00H
01D3 EF                MOV     A,R7
01D4 6480              XRL     A,#080H
01D6 4E                ORL     A,R6
01D7 7004              JNZ     ?C0023
01D9 7F01              MOV     R7,#01H
01DB 8002              SJMP    ?C0024
01DD         ?C0023:
01DD 7F00              MOV     R7,#00H
01DF         ?C0024:
01DF EF                MOV     A,R7
01E0 6036              JZ      ?C0022
                                           ; SOURCE LINE # 335
                                           ; SOURCE LINE # 337
01E2 900000      E     MOV     DPTR,#RTC_currentTimeDate+08H
01E5 E0                MOVX    A,@DPTR
01E6 FE                MOV     R6,A
01E7 A3                INC     DPTR
01E8 E0                MOVX    A,@DPTR
01E9 FF                MOV     R7,A
01EA 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+08H
01ED E0                MOVX    A,@DPTR
01EE FC                MOV     R4,A
01EF A3                INC     DPTR
01F0 E0                MOVX    A,@DPTR
01F1 FD                MOV     R5,A
01F2 ED                MOV     A,R5
01F3 B50714            CJNE    A,AR7,?C0025
01F6 EC                MOV     A,R4
01F7 B50610            CJNE    A,AR6,?C0025
                                           ; SOURCE LINE # 338
                                           ; SOURCE LINE # 340
01FA 900000      E     MOV     DPTR,#RTC_alarmCurStatus
01FD E0                MOVX    A,@DPTR
01FE FF                MOV     R7,A
01FF EF                MOV     A,R7
0200 4480              ORL     A,#080H
0202 FF                MOV     R7,A
0203 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0206 EF                MOV     A,R7
0207 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 341
0208 800E              SJMP    ?C0022
020A         ?C0025:
                                           ; SOURCE LINE # 343
                                           ; SOURCE LINE # 345
020A 900000      E     MOV     DPTR,#RTC_alarmCurStatus
020D E0                MOVX    A,@DPTR
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 24  

020E FF                MOV     R7,A
020F EF                MOV     A,R7
0210 547F              ANL     A,#07FH
0212 FF                MOV     R7,A
0213 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0216 EF                MOV     A,R7
0217 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 346
0218         ?C0026:
                                           ; SOURCE LINE # 347
0218         ?C0022:
                                           ; SOURCE LINE # 350
0218 900000      E     MOV     DPTR,#RTC_alarmCfgMask
021B E0                MOVX    A,@DPTR
021C FF                MOV     R7,A
021D 900000      R     MOV     DPTR,#RTC_tmp
0220 EF                MOV     A,R7
0221 F0                MOVX    @DPTR,A
0222         ?C0029:
                                           ; SOURCE LINE # 353
0222 900000      R     MOV     DPTR,#RTC_tmp
0225 E0                MOVX    A,@DPTR
0226 FF                MOV     R7,A
0227 EF                MOV     A,R7
0228 6032              JZ      ?C0028
022A 900000      R     MOV     DPTR,#RTC_tmp
022D E0                MOVX    A,@DPTR
022E FF                MOV     R7,A
022F 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0232 E0                MOVX    A,@DPTR
0233 FE                MOV     R6,A
0234 EE                MOV     A,R6
0235 5F                ANL     A,R7
0236 FF                MOV     R7,A
0237 900000      R     MOV     DPTR,#RTC_tmp
023A E0                MOVX    A,@DPTR
023B FE                MOV     R6,A
023C EF                MOV     A,R7
023D B50604            CJNE    A,AR6,?C0031
0240 7F01              MOV     R7,#01H
0242 8002              SJMP    ?C0032
0244         ?C0031:
0244 7F00              MOV     R7,#00H
0246         ?C0032:
0246 EF                MOV     A,R7
0247 6013              JZ      ?C0028
0249 900000      E     MOV     DPTR,#RTC_statusDateTime
024C E0                MOVX    A,@DPTR
024D FF                MOV     R7,A
024E EF                MOV     A,R7
024F 4408              ORL     A,#08H
0251 FF                MOV     R7,A
0252 900000      E     MOV     DPTR,#RTC_statusDateTime
0255 EF                MOV     A,R7
0256 F0                MOVX    @DPTR,A
0257 900000      E     MOV     DPTR,#RTC_alarmCurStatus
025A E4                CLR     A
025B F0                MOVX    @DPTR,A
025C         ?C0030:
025C         ?C0027:
025C         ?C0028:
                                           ; SOURCE LINE # 356
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 25  

025C 900000      E     MOV     DPTR,#RTC_intervalCfgMask
025F E0                MOVX    A,@DPTR
0260 FF                MOV     R7,A
0261 EF                MOV     A,R7
0262 5440              ANL     A,#040H
0264 FF                MOV     R7,A
0265 7E00              MOV     R6,#00H
0267 EF                MOV     A,R7
0268 6440              XRL     A,#040H
026A 4E                ORL     A,R6
026B 7004              JNZ     ?C0034
026D 7F01              MOV     R7,#01H
026F 8002              SJMP    ?C0035
0271         ?C0034:
0271 7F00              MOV     R7,#00H
0273         ?C0035:
0273 EF                MOV     A,R7
0274 6003              JZ      ?C0016
                                           ; SOURCE LINE # 358
                                           ; SOURCE LINE # 359
0276 120000      R     LCALL   RTC_EveryYearHandler
                                           ; SOURCE LINE # 360
0279         ?C0033:
                                           ; SOURCE LINE # 362
0279         ?C0016:
                                           ; SOURCE LINE # 365
0279 900000      E     MOV     DPTR,#RTC_alarmCfgMask
027C E0                MOVX    A,@DPTR
027D FF                MOV     R7,A
027E EF                MOV     A,R7
027F 5440              ANL     A,#040H
0281 FF                MOV     R7,A
0282 7E00              MOV     R6,#00H
0284 EF                MOV     A,R7
0285 6440              XRL     A,#040H
0287 4E                ORL     A,R6
0288 7004              JNZ     ?C0037
028A 7F01              MOV     R7,#01H
028C 8002              SJMP    ?C0038
028E         ?C0037:
028E 7F00              MOV     R7,#00H
0290         ?C0038:
0290 EF                MOV     A,R7
0291 602C              JZ      ?C0036
                                           ; SOURCE LINE # 367
                                           ; SOURCE LINE # 368
0293 900000      E     MOV     DPTR,#RTC_currentTimeDate+07H
0296 E0                MOVX    A,@DPTR
0297 FF                MOV     R7,A
0298 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+07H
029B E0                MOVX    A,@DPTR
029C FE                MOV     R6,A
029D EE                MOV     A,R6
029E B50710            CJNE    A,AR7,?C0039
                                           ; SOURCE LINE # 369
                                           ; SOURCE LINE # 371
02A1 900000      E     MOV     DPTR,#RTC_alarmCurStatus
02A4 E0                MOVX    A,@DPTR
02A5 FF                MOV     R7,A
02A6 EF                MOV     A,R7
02A7 4440              ORL     A,#040H
02A9 FF                MOV     R7,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 26  

02AA 900000      E     MOV     DPTR,#RTC_alarmCurStatus
02AD EF                MOV     A,R7
02AE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
02AF 800E              SJMP    ?C0036
02B1         ?C0039:
                                           ; SOURCE LINE # 374
                                           ; SOURCE LINE # 376
02B1 900000      E     MOV     DPTR,#RTC_alarmCurStatus
02B4 E0                MOVX    A,@DPTR
02B5 FF                MOV     R7,A
02B6 EF                MOV     A,R7
02B7 54BF              ANL     A,#0BFH
02B9 FF                MOV     R7,A
02BA 900000      E     MOV     DPTR,#RTC_alarmCurStatus
02BD EF                MOV     A,R7
02BE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 377
02BF         ?C0040:
                                           ; SOURCE LINE # 378
02BF         ?C0036:
                                           ; SOURCE LINE # 401
02BF 900000      E     MOV     DPTR,#RTC_alarmCfgMask
02C2 E0                MOVX    A,@DPTR
02C3 FF                MOV     R7,A
02C4 900000      R     MOV     DPTR,#RTC_tmp
02C7 EF                MOV     A,R7
02C8 F0                MOVX    @DPTR,A
02C9         ?C0043:
                                           ; SOURCE LINE # 404
02C9 900000      R     MOV     DPTR,#RTC_tmp
02CC E0                MOVX    A,@DPTR
02CD FF                MOV     R7,A
02CE EF                MOV     A,R7
02CF 6032              JZ      ?C0042
02D1 900000      R     MOV     DPTR,#RTC_tmp
02D4 E0                MOVX    A,@DPTR
02D5 FF                MOV     R7,A
02D6 900000      E     MOV     DPTR,#RTC_alarmCurStatus
02D9 E0                MOVX    A,@DPTR
02DA FE                MOV     R6,A
02DB EE                MOV     A,R6
02DC 5F                ANL     A,R7
02DD FF                MOV     R7,A
02DE 900000      R     MOV     DPTR,#RTC_tmp
02E1 E0                MOVX    A,@DPTR
02E2 FE                MOV     R6,A
02E3 EF                MOV     A,R7
02E4 B50604            CJNE    A,AR6,?C0045
02E7 7F01              MOV     R7,#01H
02E9 8002              SJMP    ?C0046
02EB         ?C0045:
02EB 7F00              MOV     R7,#00H
02ED         ?C0046:
02ED EF                MOV     A,R7
02EE 6013              JZ      ?C0042
02F0 900000      E     MOV     DPTR,#RTC_statusDateTime
02F3 E0                MOVX    A,@DPTR
02F4 FF                MOV     R7,A
02F5 EF                MOV     A,R7
02F6 4408              ORL     A,#08H
02F8 FF                MOV     R7,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 27  

02F9 900000      E     MOV     DPTR,#RTC_statusDateTime
02FC EF                MOV     A,R7
02FD F0                MOVX    @DPTR,A
02FE 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0301 E4                CLR     A
0302 F0                MOVX    @DPTR,A
0303         ?C0044:
0303         ?C0041:
0303         ?C0042:
                                           ; SOURCE LINE # 407
0303 900000      E     MOV     DPTR,#RTC_intervalCfgMask
0306 E0                MOVX    A,@DPTR
0307 FF                MOV     R7,A
0308 EF                MOV     A,R7
0309 5420              ANL     A,#020H
030B FF                MOV     R7,A
030C 7E00              MOV     R6,#00H
030E EF                MOV     A,R7
030F 6420              XRL     A,#020H
0311 4E                ORL     A,R6
0312 7004              JNZ     ?C0048
0314 7F01              MOV     R7,#01H
0316 8002              SJMP    ?C0049
0318         ?C0048:
0318 7F00              MOV     R7,#00H
031A         ?C0049:
031A EF                MOV     A,R7
031B 6003              JZ      ?C0012
                                           ; SOURCE LINE # 409
                                           ; SOURCE LINE # 410
031D 120000      R     LCALL   RTC_EveryMonthHandler
                                           ; SOURCE LINE # 411
0320         ?C0047:
                                           ; SOURCE LINE # 412
0320         ?C0012:
                                           ; SOURCE LINE # 415
0320 900000      E     MOV     DPTR,#RTC_alarmCfgMask
0323 E0                MOVX    A,@DPTR
0324 FF                MOV     R7,A
0325 EF                MOV     A,R7
0326 5408              ANL     A,#08H
0328 FF                MOV     R7,A
0329 7E00              MOV     R6,#00H
032B EF                MOV     A,R7
032C 6408              XRL     A,#08H
032E 4E                ORL     A,R6
032F 7004              JNZ     ?C0051
0331 7F01              MOV     R7,#01H
0333 8002              SJMP    ?C0052
0335         ?C0051:
0335 7F00              MOV     R7,#00H
0337         ?C0052:
0337 EF                MOV     A,R7
0338 602C              JZ      ?C0050
                                           ; SOURCE LINE # 417
                                           ; SOURCE LINE # 418
033A 900000      E     MOV     DPTR,#RTC_currentTimeDate+03H
033D E0                MOVX    A,@DPTR
033E FF                MOV     R7,A
033F 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+03H
0342 E0                MOVX    A,@DPTR
0343 FE                MOV     R6,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 28  

0344 EE                MOV     A,R6
0345 B50710            CJNE    A,AR7,?C0053
                                           ; SOURCE LINE # 419
                                           ; SOURCE LINE # 421
0348 900000      E     MOV     DPTR,#RTC_alarmCurStatus
034B E0                MOVX    A,@DPTR
034C FF                MOV     R7,A
034D EF                MOV     A,R7
034E 4408              ORL     A,#08H
0350 FF                MOV     R7,A
0351 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0354 EF                MOV     A,R7
0355 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 422
0356 800E              SJMP    ?C0050
0358         ?C0053:
                                           ; SOURCE LINE # 424
                                           ; SOURCE LINE # 426
0358 900000      E     MOV     DPTR,#RTC_alarmCurStatus
035B E0                MOVX    A,@DPTR
035C FF                MOV     R7,A
035D EF                MOV     A,R7
035E 54F7              ANL     A,#0F7H
0360 FF                MOV     R7,A
0361 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0364 EF                MOV     A,R7
0365 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 427
0366         ?C0054:
                                           ; SOURCE LINE # 428
0366         ?C0050:
                                           ; SOURCE LINE # 431
0366 900000      E     MOV     DPTR,#RTC_alarmCfgMask
0369 E0                MOVX    A,@DPTR
036A FF                MOV     R7,A
036B EF                MOV     A,R7
036C 5420              ANL     A,#020H
036E FF                MOV     R7,A
036F 7E00              MOV     R6,#00H
0371 EF                MOV     A,R7
0372 6420              XRL     A,#020H
0374 4E                ORL     A,R6
0375 7004              JNZ     ?C0056
0377 7F01              MOV     R7,#01H
0379 8002              SJMP    ?C0057
037B         ?C0056:
037B 7F00              MOV     R7,#00H
037D         ?C0057:
037D EF                MOV     A,R7
037E 6036              JZ      ?C0055
                                           ; SOURCE LINE # 433
                                           ; SOURCE LINE # 434
0380 900000      E     MOV     DPTR,#RTC_currentTimeDate+05H
0383 E0                MOVX    A,@DPTR
0384 FE                MOV     R6,A
0385 A3                INC     DPTR
0386 E0                MOVX    A,@DPTR
0387 FF                MOV     R7,A
0388 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+05H
038B E0                MOVX    A,@DPTR
038C FC                MOV     R4,A
038D A3                INC     DPTR
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 29  

038E E0                MOVX    A,@DPTR
038F FD                MOV     R5,A
0390 ED                MOV     A,R5
0391 B50714            CJNE    A,AR7,?C0058
0394 EC                MOV     A,R4
0395 B50610            CJNE    A,AR6,?C0058
                                           ; SOURCE LINE # 435
                                           ; SOURCE LINE # 437
0398 900000      E     MOV     DPTR,#RTC_alarmCurStatus
039B E0                MOVX    A,@DPTR
039C FF                MOV     R7,A
039D EF                MOV     A,R7
039E 4420              ORL     A,#020H
03A0 FF                MOV     R7,A
03A1 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03A4 EF                MOV     A,R7
03A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 438
03A6 800E              SJMP    ?C0055
03A8         ?C0058:
                                           ; SOURCE LINE # 440
                                           ; SOURCE LINE # 442
03A8 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03AB E0                MOVX    A,@DPTR
03AC FF                MOV     R7,A
03AD EF                MOV     A,R7
03AE 54DF              ANL     A,#0DFH
03B0 FF                MOV     R7,A
03B1 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03B4 EF                MOV     A,R7
03B5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 443
03B6         ?C0059:
                                           ; SOURCE LINE # 444
03B6         ?C0055:
                                           ; SOURCE LINE # 447
03B6 900000      E     MOV     DPTR,#RTC_alarmCfgMask
03B9 E0                MOVX    A,@DPTR
03BA FF                MOV     R7,A
03BB EF                MOV     A,R7
03BC 5410              ANL     A,#010H
03BE FF                MOV     R7,A
03BF 7E00              MOV     R6,#00H
03C1 EF                MOV     A,R7
03C2 6410              XRL     A,#010H
03C4 4E                ORL     A,R6
03C5 7004              JNZ     ?C0061
03C7 7F01              MOV     R7,#01H
03C9 8002              SJMP    ?C0062
03CB         ?C0061:
03CB 7F00              MOV     R7,#00H
03CD         ?C0062:
03CD EF                MOV     A,R7
03CE 602C              JZ      ?C0060
                                           ; SOURCE LINE # 449
                                           ; SOURCE LINE # 450
03D0 900000      E     MOV     DPTR,#RTC_currentTimeDate+04H
03D3 E0                MOVX    A,@DPTR
03D4 FF                MOV     R7,A
03D5 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+04H
03D8 E0                MOVX    A,@DPTR
03D9 FE                MOV     R6,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 30  

03DA EE                MOV     A,R6
03DB B50710            CJNE    A,AR7,?C0063
                                           ; SOURCE LINE # 451
                                           ; SOURCE LINE # 453
03DE 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03E1 E0                MOVX    A,@DPTR
03E2 FF                MOV     R7,A
03E3 EF                MOV     A,R7
03E4 4410              ORL     A,#010H
03E6 FF                MOV     R7,A
03E7 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03EA EF                MOV     A,R7
03EB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 454
03EC 800E              SJMP    ?C0060
03EE         ?C0063:
                                           ; SOURCE LINE # 456
                                           ; SOURCE LINE # 458
03EE 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03F1 E0                MOVX    A,@DPTR
03F2 FF                MOV     R7,A
03F3 EF                MOV     A,R7
03F4 54EF              ANL     A,#0EFH
03F6 FF                MOV     R7,A
03F7 900000      E     MOV     DPTR,#RTC_alarmCurStatus
03FA EF                MOV     A,R7
03FB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 459
03FC         ?C0064:
                                           ; SOURCE LINE # 460
03FC         ?C0060:
                                           ; SOURCE LINE # 483
03FC 900000      E     MOV     DPTR,#RTC_alarmCfgMask
03FF E0                MOVX    A,@DPTR
0400 FF                MOV     R7,A
0401 900000      R     MOV     DPTR,#RTC_tmp
0404 EF                MOV     A,R7
0405 F0                MOVX    @DPTR,A
0406         ?C0067:
                                           ; SOURCE LINE # 486
0406 900000      R     MOV     DPTR,#RTC_tmp
0409 E0                MOVX    A,@DPTR
040A FF                MOV     R7,A
040B EF                MOV     A,R7
040C 6032              JZ      ?C0066
040E 900000      R     MOV     DPTR,#RTC_tmp
0411 E0                MOVX    A,@DPTR
0412 FF                MOV     R7,A
0413 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0416 E0                MOVX    A,@DPTR
0417 FE                MOV     R6,A
0418 EE                MOV     A,R6
0419 5F                ANL     A,R7
041A FF                MOV     R7,A
041B 900000      R     MOV     DPTR,#RTC_tmp
041E E0                MOVX    A,@DPTR
041F FE                MOV     R6,A
0420 EF                MOV     A,R7
0421 B50604            CJNE    A,AR6,?C0069
0424 7F01              MOV     R7,#01H
0426 8002              SJMP    ?C0070
0428         ?C0069:
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 31  

0428 7F00              MOV     R7,#00H
042A         ?C0070:
042A EF                MOV     A,R7
042B 6013              JZ      ?C0066
042D 900000      E     MOV     DPTR,#RTC_statusDateTime
0430 E0                MOVX    A,@DPTR
0431 FF                MOV     R7,A
0432 EF                MOV     A,R7
0433 4408              ORL     A,#08H
0435 FF                MOV     R7,A
0436 900000      E     MOV     DPTR,#RTC_statusDateTime
0439 EF                MOV     A,R7
043A F0                MOVX    @DPTR,A
043B 900000      E     MOV     DPTR,#RTC_alarmCurStatus
043E E4                CLR     A
043F F0                MOVX    @DPTR,A
0440         ?C0068:
0440         ?C0065:
0440         ?C0066:
                                           ; SOURCE LINE # 489
0440 900000      E     MOV     DPTR,#RTC_intervalCfgMask
0443 E0                MOVX    A,@DPTR
0444 FF                MOV     R7,A
0445 EF                MOV     A,R7
0446 5408              ANL     A,#08H
0448 FF                MOV     R7,A
0449 7E00              MOV     R6,#00H
044B EF                MOV     A,R7
044C 6408              XRL     A,#08H
044E 4E                ORL     A,R6
044F 7004              JNZ     ?C0072
0451 7F01              MOV     R7,#01H
0453 8002              SJMP    ?C0073
0455         ?C0072:
0455 7F00              MOV     R7,#00H
0457         ?C0073:
0457 EF                MOV     A,R7
0458 6003              JZ      ?C0071
                                           ; SOURCE LINE # 491
                                           ; SOURCE LINE # 492
045A 120000      R     LCALL   RTC_EveryDayHandler
                                           ; SOURCE LINE # 493
045D         ?C0071:
                                           ; SOURCE LINE # 495
045D 900000      E     MOV     DPTR,#RTC_currentTimeDate+03H
0460 E0                MOVX    A,@DPTR
0461 FF                MOV     R7,A
0462 EF                MOV     A,R7
0463 B4011D            CJNE    A,#01H,?C0010
                                           ; SOURCE LINE # 496
                                           ; SOURCE LINE # 498
0466 900000      E     MOV     DPTR,#RTC_intervalCfgMask
0469 E0                MOVX    A,@DPTR
046A FF                MOV     R7,A
046B EF                MOV     A,R7
046C 5410              ANL     A,#010H
046E FF                MOV     R7,A
046F 7E00              MOV     R6,#00H
0471 EF                MOV     A,R7
0472 6410              XRL     A,#010H
0474 4E                ORL     A,R6
0475 7004              JNZ     ?C0076
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 32  

0477 7F01              MOV     R7,#01H
0479 8002              SJMP    ?C0077
047B         ?C0076:
047B 7F00              MOV     R7,#00H
047D         ?C0077:
047D EF                MOV     A,R7
047E 6003              JZ      ?C0010
                                           ; SOURCE LINE # 500
                                           ; SOURCE LINE # 501
0480 120000      R     LCALL   RTC_EveryWeekHandler
                                           ; SOURCE LINE # 502
0483         ?C0075:
                                           ; SOURCE LINE # 503
0483         ?C0074:
                                           ; SOURCE LINE # 505
0483         ?C0010:
                                           ; SOURCE LINE # 508
0483 900000      E     MOV     DPTR,#RTC_currentTimeDate+02H
0486 E0                MOVX    A,@DPTR
0487 FF                MOV     R7,A
0488 EF                MOV     A,R7
0489 C3                CLR     C
048A 940C              SUBB    A,#0CH
048C 5010              JNC     ?C0078
                                           ; SOURCE LINE # 509
                                           ; SOURCE LINE # 511
048E 900000      E     MOV     DPTR,#RTC_statusDateTime
0491 E0                MOVX    A,@DPTR
0492 FF                MOV     R7,A
0493 EF                MOV     A,R7
0494 54FB              ANL     A,#0FBH
0496 FF                MOV     R7,A
0497 900000      E     MOV     DPTR,#RTC_statusDateTime
049A EF                MOV     A,R7
049B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 512
049C 800E              SJMP    ?C0079
049E         ?C0078:
                                           ; SOURCE LINE # 514
                                           ; SOURCE LINE # 516
049E 900000      E     MOV     DPTR,#RTC_statusDateTime
04A1 E0                MOVX    A,@DPTR
04A2 FF                MOV     R7,A
04A3 EF                MOV     A,R7
04A4 4404              ORL     A,#04H
04A6 FF                MOV     R7,A
04A7 900000      E     MOV     DPTR,#RTC_statusDateTime
04AA EF                MOV     A,R7
04AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 517
04AC         ?C0079:
                                           ; SOURCE LINE # 844
04AC 900000      E     MOV     DPTR,#RTC_alarmCfgMask
04AF E0                MOVX    A,@DPTR
04B0 FF                MOV     R7,A
04B1 EF                MOV     A,R7
04B2 5404              ANL     A,#04H
04B4 FF                MOV     R7,A
04B5 7E00              MOV     R6,#00H
04B7 EF                MOV     A,R7
04B8 6404              XRL     A,#04H
04BA 4E                ORL     A,R6
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 33  

04BB 7004              JNZ     ?C0081
04BD 7F01              MOV     R7,#01H
04BF 8002              SJMP    ?C0082
04C1         ?C0081:
04C1 7F00              MOV     R7,#00H
04C3         ?C0082:
04C3 EF                MOV     A,R7
04C4 602C              JZ      ?C0080
                                           ; SOURCE LINE # 845
                                           ; SOURCE LINE # 846
04C6 900000      E     MOV     DPTR,#RTC_currentTimeDate+02H
04C9 E0                MOVX    A,@DPTR
04CA FF                MOV     R7,A
04CB 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+02H
04CE E0                MOVX    A,@DPTR
04CF FE                MOV     R6,A
04D0 EE                MOV     A,R6
04D1 B50710            CJNE    A,AR7,?C0083
                                           ; SOURCE LINE # 847
                                           ; SOURCE LINE # 848
04D4 900000      E     MOV     DPTR,#RTC_alarmCurStatus
04D7 E0                MOVX    A,@DPTR
04D8 FF                MOV     R7,A
04D9 EF                MOV     A,R7
04DA 4404              ORL     A,#04H
04DC FF                MOV     R7,A
04DD 900000      E     MOV     DPTR,#RTC_alarmCurStatus
04E0 EF                MOV     A,R7
04E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 849
04E2 800E              SJMP    ?C0080
04E4         ?C0083:
                                           ; SOURCE LINE # 851
                                           ; SOURCE LINE # 852
04E4 900000      E     MOV     DPTR,#RTC_alarmCurStatus
04E7 E0                MOVX    A,@DPTR
04E8 FF                MOV     R7,A
04E9 EF                MOV     A,R7
04EA 54FB              ANL     A,#0FBH
04EC FF                MOV     R7,A
04ED 900000      E     MOV     DPTR,#RTC_alarmCurStatus
04F0 EF                MOV     A,R7
04F1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 853
04F2         ?C0084:
                                           ; SOURCE LINE # 854
04F2         ?C0080:
                                           ; SOURCE LINE # 857
04F2 900000      E     MOV     DPTR,#RTC_alarmCfgMask
04F5 E0                MOVX    A,@DPTR
04F6 FF                MOV     R7,A
04F7 900000      R     MOV     DPTR,#RTC_tmp
04FA EF                MOV     A,R7
04FB F0                MOVX    @DPTR,A
04FC         ?C0087:
                                           ; SOURCE LINE # 860
04FC 900000      R     MOV     DPTR,#RTC_tmp
04FF E0                MOVX    A,@DPTR
0500 FF                MOV     R7,A
0501 EF                MOV     A,R7
0502 6032              JZ      ?C0086
0504 900000      R     MOV     DPTR,#RTC_tmp
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 34  

0507 E0                MOVX    A,@DPTR
0508 FF                MOV     R7,A
0509 900000      E     MOV     DPTR,#RTC_alarmCurStatus
050C E0                MOVX    A,@DPTR
050D FE                MOV     R6,A
050E EE                MOV     A,R6
050F 5F                ANL     A,R7
0510 FF                MOV     R7,A
0511 900000      R     MOV     DPTR,#RTC_tmp
0514 E0                MOVX    A,@DPTR
0515 FE                MOV     R6,A
0516 EF                MOV     A,R7
0517 B50604            CJNE    A,AR6,?C0089
051A 7F01              MOV     R7,#01H
051C 8002              SJMP    ?C0090
051E         ?C0089:
051E 7F00              MOV     R7,#00H
0520         ?C0090:
0520 EF                MOV     A,R7
0521 6013              JZ      ?C0086
0523 900000      E     MOV     DPTR,#RTC_statusDateTime
0526 E0                MOVX    A,@DPTR
0527 FF                MOV     R7,A
0528 EF                MOV     A,R7
0529 4408              ORL     A,#08H
052B FF                MOV     R7,A
052C 900000      E     MOV     DPTR,#RTC_statusDateTime
052F EF                MOV     A,R7
0530 F0                MOVX    @DPTR,A
0531 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0534 E4                CLR     A
0535 F0                MOVX    @DPTR,A
0536         ?C0088:
0536         ?C0085:
0536         ?C0086:
                                           ; SOURCE LINE # 863
0536 900000      E     MOV     DPTR,#RTC_intervalCfgMask
0539 E0                MOVX    A,@DPTR
053A FF                MOV     R7,A
053B EF                MOV     A,R7
053C 5404              ANL     A,#04H
053E FF                MOV     R7,A
053F 7E00              MOV     R6,#00H
0541 EF                MOV     A,R7
0542 6404              XRL     A,#04H
0544 4E                ORL     A,R6
0545 7004              JNZ     ?C0092
0547 7F01              MOV     R7,#01H
0549 8002              SJMP    ?C0093
054B         ?C0092:
054B 7F00              MOV     R7,#00H
054D         ?C0093:
054D EF                MOV     A,R7
054E 6003              JZ      ?C0009
                                           ; SOURCE LINE # 864
                                           ; SOURCE LINE # 865
0550 120000      R     LCALL   RTC_EveryHourHandler
                                           ; SOURCE LINE # 866
0553         ?C0091:
                                           ; SOURCE LINE # 867
0553         ?C0009:
                                           ; SOURCE LINE # 870
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 35  

0553 900000      E     MOV     DPTR,#RTC_alarmCfgMask
0556 E0                MOVX    A,@DPTR
0557 FF                MOV     R7,A
0558 EF                MOV     A,R7
0559 5402              ANL     A,#02H
055B FF                MOV     R7,A
055C 7E00              MOV     R6,#00H
055E EF                MOV     A,R7
055F 6402              XRL     A,#02H
0561 4E                ORL     A,R6
0562 7004              JNZ     ?C0095
0564 7F01              MOV     R7,#01H
0566 8002              SJMP    ?C0096
0568         ?C0095:
0568 7F00              MOV     R7,#00H
056A         ?C0096:
056A EF                MOV     A,R7
056B 602C              JZ      ?C0094
                                           ; SOURCE LINE # 871
                                           ; SOURCE LINE # 872
056D 900000      E     MOV     DPTR,#RTC_currentTimeDate+01H
0570 E0                MOVX    A,@DPTR
0571 FF                MOV     R7,A
0572 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate+01H
0575 E0                MOVX    A,@DPTR
0576 FE                MOV     R6,A
0577 EE                MOV     A,R6
0578 B50710            CJNE    A,AR7,?C0097
                                           ; SOURCE LINE # 873
                                           ; SOURCE LINE # 874
057B 900000      E     MOV     DPTR,#RTC_alarmCurStatus
057E E0                MOVX    A,@DPTR
057F FF                MOV     R7,A
0580 EF                MOV     A,R7
0581 4402              ORL     A,#02H
0583 FF                MOV     R7,A
0584 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0587 EF                MOV     A,R7
0588 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 875
0589 800E              SJMP    ?C0094
058B         ?C0097:
                                           ; SOURCE LINE # 877
                                           ; SOURCE LINE # 878
058B 900000      E     MOV     DPTR,#RTC_alarmCurStatus
058E E0                MOVX    A,@DPTR
058F FF                MOV     R7,A
0590 EF                MOV     A,R7
0591 54FD              ANL     A,#0FDH
0593 FF                MOV     R7,A
0594 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0597 EF                MOV     A,R7
0598 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 879
0599         ?C0098:
                                           ; SOURCE LINE # 880
0599         ?C0094:
                                           ; SOURCE LINE # 883
0599 900000      E     MOV     DPTR,#RTC_alarmCfgMask
059C E0                MOVX    A,@DPTR
059D FF                MOV     R7,A
059E 900000      R     MOV     DPTR,#RTC_tmp
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 36  

05A1 EF                MOV     A,R7
05A2 F0                MOVX    @DPTR,A
05A3         ?C0101:
                                           ; SOURCE LINE # 886
05A3 900000      R     MOV     DPTR,#RTC_tmp
05A6 E0                MOVX    A,@DPTR
05A7 FF                MOV     R7,A
05A8 EF                MOV     A,R7
05A9 6032              JZ      ?C0100
05AB 900000      R     MOV     DPTR,#RTC_tmp
05AE E0                MOVX    A,@DPTR
05AF FF                MOV     R7,A
05B0 900000      E     MOV     DPTR,#RTC_alarmCurStatus
05B3 E0                MOVX    A,@DPTR
05B4 FE                MOV     R6,A
05B5 EE                MOV     A,R6
05B6 5F                ANL     A,R7
05B7 FF                MOV     R7,A
05B8 900000      R     MOV     DPTR,#RTC_tmp
05BB E0                MOVX    A,@DPTR
05BC FE                MOV     R6,A
05BD EF                MOV     A,R7
05BE B50604            CJNE    A,AR6,?C0103
05C1 7F01              MOV     R7,#01H
05C3 8002              SJMP    ?C0104
05C5         ?C0103:
05C5 7F00              MOV     R7,#00H
05C7         ?C0104:
05C7 EF                MOV     A,R7
05C8 6013              JZ      ?C0100
05CA 900000      E     MOV     DPTR,#RTC_statusDateTime
05CD E0                MOVX    A,@DPTR
05CE FF                MOV     R7,A
05CF EF                MOV     A,R7
05D0 4408              ORL     A,#08H
05D2 FF                MOV     R7,A
05D3 900000      E     MOV     DPTR,#RTC_statusDateTime
05D6 EF                MOV     A,R7
05D7 F0                MOVX    @DPTR,A
05D8 900000      E     MOV     DPTR,#RTC_alarmCurStatus
05DB E4                CLR     A
05DC F0                MOVX    @DPTR,A
05DD         ?C0102:
05DD         ?C0099:
05DD         ?C0100:
                                           ; SOURCE LINE # 889
05DD 900000      E     MOV     DPTR,#RTC_intervalCfgMask
05E0 E0                MOVX    A,@DPTR
05E1 FF                MOV     R7,A
05E2 EF                MOV     A,R7
05E3 5402              ANL     A,#02H
05E5 FF                MOV     R7,A
05E6 7E00              MOV     R6,#00H
05E8 EF                MOV     A,R7
05E9 6402              XRL     A,#02H
05EB 4E                ORL     A,R6
05EC 7004              JNZ     ?C0106
05EE 7F01              MOV     R7,#01H
05F0 8002              SJMP    ?C0107
05F2         ?C0106:
05F2 7F00              MOV     R7,#00H
05F4         ?C0107:
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 37  

05F4 EF                MOV     A,R7
05F5 6003              JZ      ?C0008
                                           ; SOURCE LINE # 890
                                           ; SOURCE LINE # 891
05F7 120000      R     LCALL   RTC_EveryMinuteHandler
                                           ; SOURCE LINE # 892
05FA         ?C0105:
                                           ; SOURCE LINE # 893
05FA         ?C0008:
                                           ; SOURCE LINE # 896
05FA 900000      E     MOV     DPTR,#RTC_alarmCfgMask
05FD E0                MOVX    A,@DPTR
05FE FF                MOV     R7,A
05FF EF                MOV     A,R7
0600 5401              ANL     A,#01H
0602 FF                MOV     R7,A
0603 7E00              MOV     R6,#00H
0605 EF                MOV     A,R7
0606 6401              XRL     A,#01H
0608 4E                ORL     A,R6
0609 7004              JNZ     ?C0109
060B 7F01              MOV     R7,#01H
060D 8002              SJMP    ?C0110
060F         ?C0109:
060F 7F00              MOV     R7,#00H
0611         ?C0110:
0611 EF                MOV     A,R7
0612 602C              JZ      ?C0108
                                           ; SOURCE LINE # 897
                                           ; SOURCE LINE # 898
0614 900000      E     MOV     DPTR,#RTC_currentTimeDate
0617 E0                MOVX    A,@DPTR
0618 FF                MOV     R7,A
0619 900000      E     MOV     DPTR,#RTC_alarmCfgTimeDate
061C E0                MOVX    A,@DPTR
061D FE                MOV     R6,A
061E EE                MOV     A,R6
061F B50710            CJNE    A,AR7,?C0111
                                           ; SOURCE LINE # 899
                                           ; SOURCE LINE # 900
0622 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0625 E0                MOVX    A,@DPTR
0626 FF                MOV     R7,A
0627 EF                MOV     A,R7
0628 4401              ORL     A,#01H
062A FF                MOV     R7,A
062B 900000      E     MOV     DPTR,#RTC_alarmCurStatus
062E EF                MOV     A,R7
062F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 901
0630 800E              SJMP    ?C0108
0632         ?C0111:
                                           ; SOURCE LINE # 903
                                           ; SOURCE LINE # 904
0632 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0635 E0                MOVX    A,@DPTR
0636 FF                MOV     R7,A
0637 EF                MOV     A,R7
0638 54FE              ANL     A,#0FEH
063A FF                MOV     R7,A
063B 900000      E     MOV     DPTR,#RTC_alarmCurStatus
063E EF                MOV     A,R7
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 38  

063F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 905
0640         ?C0112:
                                           ; SOURCE LINE # 906
0640         ?C0108:
                                           ; SOURCE LINE # 909
0640 900000      E     MOV     DPTR,#RTC_alarmCfgMask
0643 E0                MOVX    A,@DPTR
0644 FF                MOV     R7,A
0645 900000      R     MOV     DPTR,#RTC_tmp
0648 EF                MOV     A,R7
0649 F0                MOVX    @DPTR,A
064A         ?C0115:
                                           ; SOURCE LINE # 910
064A 900000      R     MOV     DPTR,#RTC_tmp
064D E0                MOVX    A,@DPTR
064E FF                MOV     R7,A
064F EF                MOV     A,R7
0650 6032              JZ      ?C0114
0652 900000      R     MOV     DPTR,#RTC_tmp
0655 E0                MOVX    A,@DPTR
0656 FF                MOV     R7,A
0657 900000      E     MOV     DPTR,#RTC_alarmCurStatus
065A E0                MOVX    A,@DPTR
065B FE                MOV     R6,A
065C EE                MOV     A,R6
065D 5F                ANL     A,R7
065E FF                MOV     R7,A
065F 900000      R     MOV     DPTR,#RTC_tmp
0662 E0                MOVX    A,@DPTR
0663 FE                MOV     R6,A
0664 EF                MOV     A,R7
0665 B50604            CJNE    A,AR6,?C0117
0668 7F01              MOV     R7,#01H
066A 8002              SJMP    ?C0118
066C         ?C0117:
066C 7F00              MOV     R7,#00H
066E         ?C0118:
066E EF                MOV     A,R7
066F 6013              JZ      ?C0114
0671 900000      E     MOV     DPTR,#RTC_statusDateTime
0674 E0                MOVX    A,@DPTR
0675 FF                MOV     R7,A
0676 EF                MOV     A,R7
0677 4408              ORL     A,#08H
0679 FF                MOV     R7,A
067A 900000      E     MOV     DPTR,#RTC_statusDateTime
067D EF                MOV     A,R7
067E F0                MOVX    @DPTR,A
067F 900000      E     MOV     DPTR,#RTC_alarmCurStatus
0682 E4                CLR     A
0683 F0                MOVX    @DPTR,A
0684         ?C0116:
0684         ?C0113:
0684         ?C0114:
                                           ; SOURCE LINE # 913
0684 900000      E     MOV     DPTR,#RTC_intervalCfgMask
0687 E0                MOVX    A,@DPTR
0688 FF                MOV     R7,A
0689 EF                MOV     A,R7
068A 5401              ANL     A,#01H
068C FF                MOV     R7,A
C51 COMPILER V9.51   RTC_INT                                                               05/02/2014 02:18:51 PAGE 39  

068D 7E00              MOV     R6,#00H
068F EF                MOV     A,R7
0690 6401              XRL     A,#01H
0692 4E                ORL     A,R6
0693 7004              JNZ     ?C0120
0695 7F01              MOV     R7,#01H
0697 8002              SJMP    ?C0121
0699         ?C0120:
0699 7F00              MOV     R7,#00H
069B         ?C0121:
069B EF                MOV     A,R7
069C 6003              JZ      ?C0122
                                           ; SOURCE LINE # 914
                                           ; SOURCE LINE # 915
069E 120000      R     LCALL   RTC_EverySecondHandler
                                           ; SOURCE LINE # 916
06A1         ?C0119:
                                           ; SOURCE LINE # 918
06A1         ?C0122:
06A1 D007              POP     AR7
06A3 D006              POP     AR6
06A5 D005              POP     AR5
06A7 D004              POP     AR4
06A9 D003              POP     AR3
06AB D002              POP     AR2
06AD D001              POP     AR1
06AF D000              POP     AR0
06B1 D0D0              POP     PSW
06B3 D000        E     POP     ?C?XPAGE1SFR
06B5 D086              POP     DPS
06B7 D084              POP     DPL1
06B9 D085              POP     DPH1
06BB D082              POP     DPL
06BD D083              POP     DPH
06BF D0F0              POP     B
06C1 D0E0              POP     ACC
06C3 32                RETI    
             ; FUNCTION RTC_ISR (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1739    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
