C51 COMPILER V9.51   INTERFACE                                                             04/27/2014 21:53:25 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE INTERFACE
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\Interface.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\Interface.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\Interface.lst) CD DB NOIP OT(0,SIZE) DF(DEB
                    -UG) INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\Interface.obj)

line level    source

   1          /* ========================================
   2           *
   3           * Copyright YOUR COMPANY, THE YEAR
   4           * All Rights Reserved
   5           * UNPUBLISHED, LICENSED SOFTWARE.
   6           *
   7           * CONFIDENTIAL AND PROPRIETARY INFORMATION
   8           * WHICH IS THE PROPERTY OF your company.
   9           *
  10           * ========================================
  11          */
  12          
  13          #include "Interface.h"
  14          
  15          void Hibernate_ISR(){
  16   1          
  17   1          return;   
  18   1      }
  19          
  20          void StartCollection_ISR(){
  21   1          
  22   1          struct header_package header;
  23   1          uint8 header_size = sizeof(struct header_package);
  24   1          
  25   1          /* Store Header */
  26   1          header.start_block = STARTBLOCK;
  27   1          header.sample_sensor = get_variable(EE_SENSOR);
  28   1          header.sample_unit = get_variable(EE_SAMPLE_UNIT);
  29   1          header.sample_interval = get_variable(EE_SAMPLE_INTERVAL);
  30   1          header.second = RTC_ReadSecond();
  31   1          header.minute = RTC_ReadMinute();
  32   1          header.hour = RTC_ReadHour();
  33   1          header.day = RTC_ReadDayOfMonth();
  34   1          header.month = RTC_ReadMonth();
  35   1          header.year = RTC_ReadYear();
  36   1          header.pad = 0x0;
  37   1      
  38   1          Em_EEPROM_Write((uint8*) (&header), TailPtr, header_size);
  39   1          TailPtr = TailPtr + header_size;
  40   1          
  41   1          TakeSample_IRQ_Start();
  42   1          
  43   1          return;   
  44   1      }
  45          
  46          void StopCollection_ISR(){
  47   1          
  48   1          TakeSample_IRQ_Stop();
  49   1          
  50   1          return;   
  51   1      }
  52          
  53          /* [] END OF FILE */
C51 COMPILER V9.51   INTERFACE                                                             04/27/2014 21:53:25 PAGE 2   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Hibernate_ISR (BEGIN)
                                           ; SOURCE LINE # 15
                                           ; SOURCE LINE # 18
0000         ?C0001:
0000 22                RET     
             ; FUNCTION Hibernate_ISR (END)

             ; FUNCTION StartCollection_ISR (BEGIN)
                                           ; SOURCE LINE # 20
                                           ; SOURCE LINE # 23
0000 900000      R     MOV     DPTR,#header_size
0003 7410              MOV     A,#010H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 26
0006 900000      R     MOV     DPTR,#header
0009 7440              MOV     A,#040H
000B F0                MOVX    @DPTR,A
000C A3                INC     DPTR
000D E4                CLR     A
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 27
000F 7F00              MOV     R7,#00H
0011 7E00              MOV     R6,#00H
0013 120000      E     LCALL   _get_variable
0016 7E00              MOV     R6,#00H
0018 900000      R     MOV     DPTR,#header+02H
001B EE                MOV     A,R6
001C F0                MOVX    @DPTR,A
001D A3                INC     DPTR
001E EF                MOV     A,R7
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 28
0020 7F01              MOV     R7,#01H
0022 7E00              MOV     R6,#00H
0024 120000      E     LCALL   _get_variable
0027 7E00              MOV     R6,#00H
0029 900000      R     MOV     DPTR,#header+04H
002C EE                MOV     A,R6
002D F0                MOVX    @DPTR,A
002E A3                INC     DPTR
002F EF                MOV     A,R7
0030 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 29
0031 7F02              MOV     R7,#02H
0033 7E00              MOV     R6,#00H
0035 120000      E     LCALL   _get_variable
0038 7E00              MOV     R6,#00H
003A 900000      R     MOV     DPTR,#header+06H
003D EE                MOV     A,R6
003E F0                MOVX    @DPTR,A
003F A3                INC     DPTR
0040 EF                MOV     A,R7
0041 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 30
0042 120000      E     LCALL   RTC_ReadSecond
0045 900000      R     MOV     DPTR,#header+0AH
0048 EF                MOV     A,R7
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 31
C51 COMPILER V9.51   INTERFACE                                                             04/27/2014 21:53:25 PAGE 3   

004A 120000      E     LCALL   RTC_ReadMinute
004D 900000      R     MOV     DPTR,#header+0BH
0050 EF                MOV     A,R7
0051 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 32
0052 120000      E     LCALL   RTC_ReadHour
0055 900000      R     MOV     DPTR,#header+0CH
0058 EF                MOV     A,R7
0059 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 33
005A 120000      E     LCALL   RTC_ReadDayOfMonth
005D 900000      R     MOV     DPTR,#header+0DH
0060 EF                MOV     A,R7
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 34
0062 120000      E     LCALL   RTC_ReadMonth
0065 900000      R     MOV     DPTR,#header+0EH
0068 EF                MOV     A,R7
0069 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 35
006A 120000      E     LCALL   RTC_ReadYear
006D 900000      R     MOV     DPTR,#header+08H
0070 EE                MOV     A,R6
0071 F0                MOVX    @DPTR,A
0072 A3                INC     DPTR
0073 EF                MOV     A,R7
0074 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 36
0075 900000      R     MOV     DPTR,#header+0FH
0078 E4                CLR     A
0079 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 38
007A 7B01              MOV     R3,#01H
007C 7A00        R     MOV     R2,#HIGH header
007E 7900        R     MOV     R1,#LOW header
0080 C003              PUSH    AR3
0082 C002              PUSH    AR2
0084 C001              PUSH    AR1
0086 900000      E     MOV     DPTR,#TailPtr
0089 120000      E     LCALL   ?C?PLDXDATA
008C 900000      E     MOV     DPTR,#?_Em_EEPROM_Write?BYTE+03H
008F 120000      E     LCALL   ?C?PSTXDATA
0092 900000      R     MOV     DPTR,#header_size
0095 E0                MOVX    A,@DPTR
0096 FF                MOV     R7,A
0097 7E00              MOV     R6,#00H
0099 900000      E     MOV     DPTR,#?_Em_EEPROM_Write?BYTE+06H
009C EE                MOV     A,R6
009D F0                MOVX    @DPTR,A
009E A3                INC     DPTR
009F EF                MOV     A,R7
00A0 F0                MOVX    @DPTR,A
00A1 D001              POP     AR1
00A3 D002              POP     AR2
00A5 D003              POP     AR3
00A7 120000      E     LCALL   _Em_EEPROM_Write
                                           ; SOURCE LINE # 39
00AA 900000      R     MOV     DPTR,#header_size
00AD E0                MOVX    A,@DPTR
00AE FF                MOV     R7,A
00AF 7E00              MOV     R6,#00H
00B1 900000      E     MOV     DPTR,#TailPtr+01H
C51 COMPILER V9.51   INTERFACE                                                             04/27/2014 21:53:25 PAGE 4   

00B4 EE                MOV     A,R6
00B5 8FF0              MOV     B,R7
00B7 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 41
00BA 120000      E     LCALL   TakeSample_IRQ_Start
                                           ; SOURCE LINE # 44
00BD         ?C0002:
00BD 22                RET     
             ; FUNCTION StartCollection_ISR (END)

             ; FUNCTION StopCollection_ISR (BEGIN)
                                           ; SOURCE LINE # 46
                                           ; SOURCE LINE # 48
0000 120000      E     LCALL   TakeSample_IRQ_Stop
                                           ; SOURCE LINE # 51
0003         ?C0003:
0003 22                RET     
             ; FUNCTION StopCollection_ISR (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     17    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
