C51 COMPILER V9.51   LED_HANDLER                                                           05/20/2014 04:41:05 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE LED_HANDLER
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\LED_handler.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\LED_handler.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\LED_handler.lst) CD DB NOIP OT(0,SIZE) DF
                    -(DEBUG) INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\LED_handler.obj)

line level    source

   1          /* ========================================
   2           *
   3           * (c) Erebus Labs Ltd. 2014
   4           *
   5           * Project: Erebus Labs Sensor
   6           * File:    LED_handler.c
   7           *
   8           * Manages LED output
   9           *
  10           * ========================================
  11          */
  12          
  13          #include "LED_handler.h"
  14          
  15          void LED_on(uint8 color){
  16   1          
  17   1          SOLID_LED_CTRL_Write(OFF);
  18   1          
  19   1          switch (color){   
  20   2          
  21   2              case RED:
  22   2              case GREEN:
  23   2              case BLUE:
  24   2                  SOLID_LED_CTRL_Write(color);
  25   2                  break;
  26   2                  
  27   2              case MAGENTA:
  28   2                  PWM0_CTRL_Write(PWM_BLUE);
  29   2                  PWM1_CTRL_Write(PWM_RED);
  30   2                  break;
  31   2                      
  32   2              case YELLOW:
  33   2                  PWM0_CTRL_Write(PWM_GREEN);
  34   2                  PWM1_CTRL_Write(PWM_RED);
  35   2                  break;
  36   2              
  37   2              case CYAN:
  38   2                  PWM0_CTRL_Write(PWM_GREEN);
  39   2                  PWM1_CTRL_Write(PWM_BLUE);
  40   2                  break;          
  41   2                  
  42   2          }
  43   1          return;
  44   1      }
  45          
  46          void LED_off(){
  47   1          
  48   1          SOLID_LED_CTRL_Write(OFF);
  49   1          PWM0_CTRL_Write(OFF);
  50   1          PWM1_CTRL_Write(OFF); 
  51   1          
  52   1          return;
  53   1      }
C51 COMPILER V9.51   LED_HANDLER                                                           05/20/2014 04:41:05 PAGE 2   

  54          
  55          /* [] END OF FILE */
C51 COMPILER V9.51   LED_HANDLER                                                           05/20/2014 04:41:05 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _LED_on (BEGIN)
                                           ; SOURCE LINE # 15
0000 900000      R     MOV     DPTR,#color
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 17
0005 7F00              MOV     R7,#00H
0007 120000      E     LCALL   _SOLID_LED_CTRL_Write
                                           ; SOURCE LINE # 19
000A 900000      R     MOV     DPTR,#color
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F EF                MOV     A,R7
0010 120000      E     LCALL   ?C?CCASE
0013 0000        R     DW      ?C0004
0015 01                DB      01H
0016 0000        R     DW      ?C0004
0018 02                DB      02H
0019 0000        R     DW      ?C0005
001B 03                DB      03H
001C 0000        R     DW      ?C0004
001E 04                DB      04H
001F 0000        R     DW      ?C0006
0021 05                DB      05H
0022 0000        R     DW      ?C0007
0024 06                DB      06H
0025 0000              DW      00H
0027 0000        R     DW      ?C0008
                                           ; SOURCE LINE # 21
0029         ?C0002:
                                           ; SOURCE LINE # 22
0029         ?C0003:
                                           ; SOURCE LINE # 23
0029         ?C0004:
                                           ; SOURCE LINE # 24
0029 900000      R     MOV     DPTR,#color
002C E0                MOVX    A,@DPTR
002D FF                MOV     R7,A
002E 120000      E     LCALL   _SOLID_LED_CTRL_Write
                                           ; SOURCE LINE # 25
0031 22                RET     
                                           ; SOURCE LINE # 27
0032         ?C0005:
                                           ; SOURCE LINE # 28
0032 7F02              MOV     R7,#02H
0034 120000      E     LCALL   _PWM0_CTRL_Write
                                           ; SOURCE LINE # 29
0037 7F01              MOV     R7,#01H
0039 120000      E     LCALL   _PWM1_CTRL_Write
                                           ; SOURCE LINE # 30
003C 22                RET     
                                           ; SOURCE LINE # 32
003D         ?C0006:
                                           ; SOURCE LINE # 33
003D 7F03              MOV     R7,#03H
003F 120000      E     LCALL   _PWM0_CTRL_Write
                                           ; SOURCE LINE # 34
0042 7F01              MOV     R7,#01H
0044 120000      E     LCALL   _PWM1_CTRL_Write
C51 COMPILER V9.51   LED_HANDLER                                                           05/20/2014 04:41:05 PAGE 4   

                                           ; SOURCE LINE # 35
0047 22                RET     
                                           ; SOURCE LINE # 37
0048         ?C0007:
                                           ; SOURCE LINE # 38
0048 7F03              MOV     R7,#03H
004A 120000      E     LCALL   _PWM0_CTRL_Write
                                           ; SOURCE LINE # 39
004D 7F02              MOV     R7,#02H
004F 120000      E     LCALL   _PWM1_CTRL_Write
                                           ; SOURCE LINE # 40
                                           ; SOURCE LINE # 42
0052         ?C0001:
                                           ; SOURCE LINE # 44
0052         ?C0008:
0052 22                RET     
             ; FUNCTION _LED_on (END)

             ; FUNCTION LED_off (BEGIN)
                                           ; SOURCE LINE # 46
                                           ; SOURCE LINE # 48
0000 7F00              MOV     R7,#00H
0002 120000      E     LCALL   _SOLID_LED_CTRL_Write
                                           ; SOURCE LINE # 49
0005 7F00              MOV     R7,#00H
0007 120000      E     LCALL   _PWM0_CTRL_Write
                                           ; SOURCE LINE # 50
000A 7F00              MOV     R7,#00H
000C 120000      E     LCALL   _PWM1_CTRL_Write
                                           ; SOURCE LINE # 53
000F         ?C0009:
000F 22                RET     
             ; FUNCTION LED_off (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     99    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
