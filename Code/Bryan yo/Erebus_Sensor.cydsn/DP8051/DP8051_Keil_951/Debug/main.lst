C51 COMPILER V9.51   MAIN                                                                  05/01/2014 19:52:11 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\main.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\main.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\main.lst) CD DB NOIP OT(0,SIZE) DF(DEBUG) INCDIR
                    -(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\main.obj)

line level    source

   1          /* ========================================
   2           *
   3           * Copyright YOUR COMPANY, THE YEAR
   4           * All Rights Reserved
   5           * UNPUBLISHED, LICENSED SOFTWARE.
   6           *
   7           * CONFIDENTIAL AND PROPRIETARY INFORMATION
   8           * WHICH IS THE PROPERTY OF your company.
   9           *
  10           * ========================================
  11          */
  12          #include <project.h>
  13          #include <stdlib.h>
  14          #include "main.h"
  15          #include "Sample_Handler.h"
  16          #include "RTC_1.h"
  17          
  18          
  19          const uint8 CYCODE MemoryLocation[EmEEPROMSize]; // Errors caused by the include of main.h which includes 
             -the externs and static
  20          volatile uint8* TailPtr = (uint8*) MemoryLocation;
  21          
  22          void main()
  23          {
  24   1          /* Initialization*/
  25   1          uint16 blink_rate = 0;
  26   1          
  27   1          
  28   1          // Variable declarations
  29   1      
  30   1          
  31   1          // Start RTC and associated functions
  32   1          RTC_1_Start();
  33   1          RTC_1_EnableInt();
  34   1          RTC_1_Enable();
  35   1          
  36   1          // Enable and start EEPROM
  37   1          EEPROM_R_Start();
  38   1               
  39   1          // Enable global interrupts
  40   1          CyGlobalIntEnable;
  41   1          Vbus_IRQ_Start();
  42   1          //TakeSample_IRQ_Start();
  43   1          
  44   1      //    Blink_Timer_WritePeriod(CYDEV_EE_BASE[EEPROM_Address.blink_rate]);
  45   1          
  46   1          // Start LED Blinking
  47   1          
  48   1          //Blink_Timer_Start();  
  49   1          //blink_rate = get_variable(BLINK_RATE);
  50   1          //Blink_Timer_WritePeriod(blink_rate);
  51   1          
  52   1          
C51 COMPILER V9.51   MAIN                                                                  05/01/2014 19:52:11 PAGE 2   

  53   1          RTC_Prep();
  54   1          
  55   1      
  56   1          while(1u)
  57   1          {
  58   2              CyDelay(100);
  59   2              
  60   2              CyPmSaveClocks();
  61   2              
  62   2              RTC_1_DisableInt();
  63   2              
  64   2              CyPmSleep(PM_SLEEP_TIME_NONE,PM_SLEEP_SRC_ONE_PPS);
  65   2              
  66   2              CyPmRestoreClocks();
  67   2              
  68   2              RTC_1_EnableInt();
  69   2              
  70   2          }
  71   1          
  72   1          return;
  73   1      }
  74          
  75          /* [] END OF FILE */
C51 COMPILER V9.51   MAIN                                                                  05/01/2014 19:52:11 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 22
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 25
0000 900000      R     MOV     DPTR,#blink_rate
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 E4                CLR     A
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 32
0008 120000      E     LCALL   RTC_1_Start
                                           ; SOURCE LINE # 33
000B 120000      E     LCALL   RTC_1_EnableInt
                                           ; SOURCE LINE # 34
000E 120000      E     LCALL   RTC_1_Enable
                                           ; SOURCE LINE # 37
0011 120000      E     LCALL   EEPROM_R_Start
                                           ; SOURCE LINE # 40
0014 D2AF              SETB    EA
0016 9044F4            MOV     DPTR,#044F4H
0019 74FD              MOV     A,#0FDH
001B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 41
001C 120000      E     LCALL   Vbus_IRQ_Start
                                           ; SOURCE LINE # 53
001F 120000      E     LCALL   RTC_Prep
0022         ?C0001:
                                           ; SOURCE LINE # 56
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
0022 7F64              MOV     R7,#064H
0024 7E00              MOV     R6,#00H
0026 7D00              MOV     R5,#00H
0028 7C00              MOV     R4,#00H
002A 120000      E     LCALL   _?CyDelay
                                           ; SOURCE LINE # 60
002D 120000      E     LCALL   CyPmSaveClocks
                                           ; SOURCE LINE # 62
0030 120000      E     LCALL   RTC_1_DisableInt
                                           ; SOURCE LINE # 64
0033 7D00              MOV     R5,#00H
0035 7C08              MOV     R4,#08H
0037 7F00              MOV     R7,#00H
0039 120000      E     LCALL   _CyPmSleep
                                           ; SOURCE LINE # 66
003C 120000      E     LCALL   CyPmRestoreClocks
                                           ; SOURCE LINE # 68
003F 120000      E     LCALL   RTC_1_EnableInt
                                           ; SOURCE LINE # 70
0042 80DE              SJMP    ?C0001
0044         ?C0002:
                                           ; SOURCE LINE # 73
0044         ?C0003:
0044 22                RET     
             ; FUNCTION main (END)



C51 COMPILER V9.51   MAIN                                                                  05/01/2014 19:52:11 PAGE 4   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     69    ----
   CONSTANT SIZE    =   1024    ----
   XDATA SIZE       =      5    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
